"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[290],{53587:function(Fe,w,s){s.r(w),s.d(w,{default:function(){return de}});var W=s(26068),P=s.n(W),k=s(90228),v=s.n(k),$=s(87999),b=s.n($),H=s(48305),F=s.n(H),Q=s(54134),G=s(43953),V=s(97365),o=s(31707),K=s(97150),Y=s(34991),J=s(27374),f=s(75271),q="http://api.legalrag.studio",_="".concat(q,"/api/v1/upload"),M=function(){var j=b()(v()().mark(function u(d){var i,l;return v()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=new FormData,i.append("file",d),n.next=4,fetch(_,{method:"POST",body:i});case 4:if(l=n.sent,l.ok){n.next=7;break}throw new Error("HTTP ".concat(l.status));case 7:return n.next=9,l.json();case 9:return n.abrupt("return",n.sent);case 10:case"end":return n.stop()}},u)}));return function(d){return j.apply(this,arguments)}}(),I=s(86678),ee=s(60606),L=s(58791),ae=s(90699),U=s(12075),se=s(68114),te=s(9016),e=s(52676);var B=function(u){var d=u.position,i=u.color,l=u.scale,E=l===void 0?1:l,n=(0,f.useRef)(null);return(0,I.F)(function(y){if(n.current){var p=y.clock.getElapsedTime();n.current.position.y=d[1]+Math.sin(p*2+d[0])*.2,n.current.rotation.x=p*.5,n.current.rotation.z=p*.3}}),(0,e.jsx)(L.aL,{ref:n,args:[1,32,32],position:d,scale:E,children:(0,e.jsx)(ae.Y,{color:i,envMapIntensity:1,clearcoat:1,clearcoatRoughness:0,metalness:.5,distort:.4,speed:2})})},re=function(){var u=(0,f.useRef)(null);return(0,I.F)(function(d){if(u.current){var i=d.clock.getElapsedTime();u.current.rotation.x=Math.sin(i*.2)*.2,u.current.rotation.y=i*.1}}),(0,e.jsx)(L.KC,{ref:u,args:[3,.1,16,100],rotation:[Math.PI/2,0,0],children:(0,e.jsx)("meshStandardMaterial",{color:"#C5A059",emissive:"#C5A059",emissiveIntensity:.5,transparent:!0,opacity:.6,wireframe:!0})})},ne=function(){return(0,e.jsx)("div",{className:"absolute inset-0 z-0 opacity-60 pointer-events-none",children:(0,e.jsxs)(ee.Xz,{camera:{position:[0,0,6],fov:45},children:[(0,e.jsx)("ambientLight",{intensity:.5}),(0,e.jsx)("pointLight",{position:[10,10,10],intensity:1}),(0,e.jsxs)(U.b,{speed:1.5,rotationIntensity:.2,floatIntensity:.5,children:[(0,e.jsx)(B,{position:[0,0,0],color:"#4F46E5",scale:1.2}),(0,e.jsx)(re,{})]}),(0,e.jsxs)(U.b,{speed:2,rotationIntensity:.5,floatIntensity:1,children:[(0,e.jsx)(B,{position:[-3,1,-2],color:"#9333EA",scale:.5}),(0,e.jsx)(B,{position:[3,-1,-3],color:"#C5A059",scale:.6})]}),(0,e.jsx)(se.qA,{preset:"city"}),(0,e.jsx)(te.t,{radius:100,depth:50,count:1e3,factor:4,saturation:0,fade:!0,speed:1})]})})},ye=function(){return _jsx("div",{className:"w-full h-full absolute inset-0",children:_jsxs(Canvas,{camera:{position:[0,0,4.5],fov:45},children:[_jsx("ambientLight",{intensity:1}),_jsx("spotLight",{position:[5,5,5],angle:.3,penumbra:1,intensity:2,color:"#C5A059"}),_jsx("pointLight",{position:[-5,-5,-5],intensity:.5}),_jsx(Environment,{preset:"studio"}),_jsx(Float,{rotationIntensity:.4,floatIntensity:.2,speed:1,children:_jsxs("group",{rotation:[0,0,0],position:[0,.5,0],children:[_jsx(Cylinder,{args:[1.2,1.2,.1,64],position:[0,1,0],children:_jsx("meshStandardMaterial",{color:"#C5A059",metalness:1,roughness:.15})}),_jsx(Cylinder,{args:[1,1,.1,64],position:[0,.2,0],children:_jsx("meshStandardMaterial",{color:"#C5A059",metalness:1,roughness:.15})}),_jsx(Cylinder,{args:[.6,.6,.1,64],position:[0,-.6,0],children:_jsx("meshStandardMaterial",{color:"#C5A059",metalness:1,roughness:.15})}),_jsx(Cylinder,{args:[.04,.04,.8,16],position:[.5,.6,0],children:_jsx("meshStandardMaterial",{color:"#D1D5DB",metalness:.8,roughness:.2})}),_jsx(Cylinder,{args:[.04,.04,.8,16],position:[-.5,.6,0],children:_jsx("meshStandardMaterial",{color:"#D1D5DB",metalness:.8,roughness:.2})}),_jsx(Cylinder,{args:[.04,.04,.8,16],position:[0,.6,.5],children:_jsx("meshStandardMaterial",{color:"#D1D5DB",metalness:.8,roughness:.2})}),_jsx(Cylinder,{args:[.04,.04,.8,16],position:[0,.6,-.5],children:_jsx("meshStandardMaterial",{color:"#D1D5DB",metalness:.8,roughness:.2})}),_jsx(Cylinder,{args:[.03,.03,.8,16],position:[.2,-.2,0],children:_jsx("meshStandardMaterial",{color:"#D1D5DB",metalness:.8,roughness:.2})}),_jsx(Cylinder,{args:[.03,.03,.8,16],position:[-.2,-.2,0],children:_jsx("meshStandardMaterial",{color:"#D1D5DB",metalness:.8,roughness:.2})}),_jsx(Torus,{args:[.7,.015,16,64],position:[0,-.2,0],rotation:[Math.PI/2,0,0],children:_jsx("meshStandardMaterial",{color:"#B87333",metalness:.8,roughness:.3})}),_jsx(Torus,{args:[.3,.015,16,64],position:[0,-1,0],rotation:[Math.PI/2,0,0],children:_jsx("meshStandardMaterial",{color:"#B87333",metalness:.8,roughness:.3})}),_jsx(Box,{args:[.2,.05,.2],position:[0,-.7,0],children:_jsx("meshStandardMaterial",{color:"#111",metalness:.9,roughness:.1})})]})})]})})},ue=function(){return(0,e.jsx)(ne,{})},ie=ue,le=V.Z.Dragger,oe=function(){var u=(0,f.useState)(""),d=F()(u,2),i=d[0],l=d[1],E=(0,f.useState)(!1),n=F()(E,2),y=n[0],p=n[1],ce=(0,f.useState)([]),Z=F()(ce,2),pe=Z[0],T=Z[1],he=(0,f.useState)(!1),R=F()(he,2),me=R[0],S=R[1],xe=(0,f.useState)(""),z=F()(xe,2),O=z[0],D=z[1],ve=(0,f.useState)(""),X=F()(ve,2),A=X[0],N=X[1],fe={name:"file",multiple:!1,showUploadList:!0,maxCount:1,fileList:pe,accept:".pdf,.doc,.docx,.txt",onChange:function(m){T(m.fileList.slice(-1))},onRemove:function(){return l(""),S(!1),D(""),N(""),!0},beforeUpload:function(){var h=b()(v()().mark(function g(r){var x,t;return v()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(x=["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain"],x.includes(r.type)){a.next=4;break}return o.ZP.error("\u53EA\u652F\u6301\u4E0A\u4F20 PDF\u3001Word \u6216 TXT \u6587\u4EF6\uFF01"),a.abrupt("return",!1);case 4:if(!(r.size/1024/1024>50)){a.next=7;break}return o.ZP.error("\u6587\u4EF6\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7 50MB\uFF01"),a.abrupt("return",!1);case 7:if(r.type!=="text/plain"){a.next=22;break}return a.prev=8,a.next=11,r.text();case 11:return t=a.sent,D(t),N(r.name),S(!0),a.abrupt("return",!1);case 18:return a.prev=18,a.t0=a.catch(8),o.ZP.error("\u8BFB\u53D6 TXT \u6587\u4EF6\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),a.abrupt("return",!1);case 22:return a.abrupt("return",!0);case 23:case"end":return a.stop()}},g,null,[[8,18]])}));function m(g){return h.apply(this,arguments)}return m}(),customRequest:function(){var h=b()(v()().mark(function g(r){var x,t,C,a;return v()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return x=r.file,t=r.onError,C=r.onSuccess,c.prev=1,p(!0),c.next=5,M(x);case 5:a=c.sent,p(!1),a!=null&&a.success?(o.ZP.success("".concat(x.name," \u4E0A\u4F20\u6210\u529F\uFF01")),l(a.data.uuid),C==null||C(a,x)):(o.ZP.error((a==null?void 0:a.message)||"\u4E0A\u4F20\u5931\u8D25"),t==null||t(new Error((a==null?void 0:a.message)||"upload failed"))),c.next=15;break;case 10:c.prev=10,c.t0=c.catch(1),p(!1),o.ZP.error("".concat(x.name," \u4E0A\u4F20\u5931\u8D25")),t==null||t(c.t0);case 15:case"end":return c.stop()}},g,null,[[1,10]])}));function m(g){return h.apply(this,arguments)}return m}()},ge=function(){var h=b()(v()().mark(function m(){var g,r;return v()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(A){t.next=3;break}return o.ZP.warning("\u672A\u68C0\u6D4B\u5230\u5F85\u7F16\u8F91\u7684 TXT \u6587\u4EF6"),t.abrupt("return");case 3:return t.prev=3,p(!0),g=new File([O],A,{type:"text/plain"}),t.next=8,M(g);case 8:r=t.sent,p(!1),r!=null&&r.success?(o.ZP.success("".concat(A," \u4E0A\u4F20\u6210\u529F\uFF01")),l(r.data.uuid),S(!1),T([{uid:"".concat(Date.now()),name:A,status:"done",percent:100,response:r}])):o.ZP.error((r==null?void 0:r.message)||"\u4E0A\u4F20\u5931\u8D25"),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(3),p(!1),o.ZP.error("\u4E0A\u4F20\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5");case 17:case"end":return t.stop()}},m,null,[[3,13]])}));return function(){return h.apply(this,arguments)}}(),je=function(){if(!i){o.ZP.warning("\u8BF7\u5148\u4E0A\u4F20\u6587\u4EF6");return}G.history.push("/contract-analysis?fileId=".concat(i))};return(0,e.jsxs)("div",{style:{position:"relative",width:"100vw",height:"100vh",minHeight:"100vh",background:"#09090b",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,e.jsx)(ie,{}),(0,e.jsxs)("div",{style:{position:"relative",zIndex:1,padding:"24px",width:"100%",maxWidth:"800px"},children:[(0,e.jsxs)("div",{className:"sexy-card overflow-hidden",children:[(0,e.jsxs)("div",{className:"px-6 py-4 flex items-center justify-between border-b border-white/10 bg-white/5",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-xs font-semibold tracking-wide text-brand-200/80 uppercase",children:"LegalRag"}),(0,e.jsx)("p",{className:"text-sm text-brand-100 font-medium",children:"\u5408\u540C\u667A\u80FD\u5BA1\u67E5\u7CFB\u7EDF"})]}),(0,e.jsx)("span",{className:"rounded-full border border-white/10 bg-white/5 px-3 py-1 text-xs text-brand-50 backdrop-blur-md",children:"\u4E0A\u4F20 \xB7 \u5206\u6790 \xB7 \u98CE\u9669\u8BC4\u4F30"})]}),(0,e.jsxs)("div",{className:"px-8 py-10",children:[(0,e.jsxs)("div",{className:"mb-10 text-center space-y-3",children:[(0,e.jsx)("h1",{className:"text-3xl font-bold text-white tracking-tight",children:"\u4E0A\u4F20\u60A8\u7684\u5408\u540C"}),(0,e.jsx)("p",{className:"text-slate-400 max-w-md mx-auto",children:"\u652F\u6301\u591A\u79CD\u6587\u6863\u683C\u5F0F\uFF0CAI \u5C06\u81EA\u52A8\u4E3A\u60A8\u8BC6\u522B\u6F5C\u5728\u6CD5\u5F8B\u98CE\u9669\u5E76\u63D0\u4F9B\u4E13\u4E1A\u4FEE\u6539\u5EFA\u8BAE\u3002"})]}),(0,e.jsxs)("div",{className:"space-y-8",children:[(0,e.jsx)("div",{className:"shimmer-loading rounded-xl",children:(0,e.jsxs)(le,P()(P()({},fe),{},{className:"!bg-white/5 !border-2 !border-dashed !border-white/10 hover:!border-brand-500/50 !rounded-xl transition-all duration-300",children:[(0,e.jsx)("p",{className:"ant-upload-drag-icon !text-brand-400 !mb-4",children:(0,e.jsx)(Q.Z,{style:{fontSize:48}})}),(0,e.jsx)("p",{className:"ant-upload-text !text-slate-200 !text-lg !font-medium",children:"\u70B9\u51FB\u6216\u62D6\u62FD\u6587\u4EF6\u5230\u6B64\u533A\u57DF\u4E0A\u4F20"}),(0,e.jsx)("p",{className:"ant-upload-hint !text-slate-500 !mt-2",children:"\u652F\u6301 PDF\u3001Word (doc/docx) \u548C TXT \u683C\u5F0F\uFF0C\u4E0D\u8D85\u8FC7 50MB"})]}))}),(0,e.jsxs)("div",{className:"flex flex-col gap-6 md:flex-row md:items-center md:justify-between pt-4 border-t border-white/5",children:[(0,e.jsx)("div",{className:"flex-1",children:(0,e.jsx)("p",{className:"text-sm text-slate-400 leading-relaxed",children:"\u4E0A\u4F20\u5B8C\u6210\u540E\uFF0C\u70B9\u51FB\u4E0B\u65B9\u6309\u94AE\u5F00\u59CB\u667A\u80FD\u5206\u6790\u3002"})}),(0,e.jsx)(K.ZP,{type:"primary",size:"large",disabled:!i||y,loading:y,className:"!h-12 !px-8 !rounded-xl !text-lg !font-semibold transition-all ".concat(i?"!bg-brand-600 hover:!bg-brand-500 hover:!scale-105 shadow-lg shadow-brand-600/20":"!bg-slate-800 !text-slate-500 !border-none"),onClick:je,children:"\u5F00\u59CB\u667A\u80FD\u5206\u6790"})]})]})]})]}),(0,e.jsx)(Y.Z,{title:(0,e.jsx)("span",{className:"font-semibold",children:"\u7F16\u8F91 TXT \u5185\u5BB9"}),open:me,okText:"\u4FDD\u5B58\u5E76\u4E0A\u4F20",cancelText:"\u53D6\u6D88",confirmLoading:y,onOk:ge,onCancel:function(){S(!1),D(""),N(""),T([]),l("")},width:900,destroyOnClose:!0,className:"dark-modal",children:(0,e.jsxs)("div",{className:"space-y-4 py-2",children:[(0,e.jsxs)("div",{className:"text-sm text-slate-500 flex items-center gap-2",children:[(0,e.jsx)("span",{className:"w-2 h-2 bg-brand-500 rounded-full animate-pulse"}),"\u4EC5\u5BF9 TXT \u6587\u4EF6\u652F\u6301\u5728\u7EBF\u4FEE\u6539\uFF1BPDF/Word \u8BF7\u76F4\u63A5\u4E0A\u4F20\u3002"]}),(0,e.jsx)(J.Z.TextArea,{value:O,onChange:function(m){return D(m.target.value)},autoSize:{minRows:16,maxRows:28},className:"!bg-black/20 !border-white/10 !rounded-lg !p-4 !text-base !leading-relaxed !text-slate-200 placeholder:!text-slate-600"})]})})]})]})},de=oe}}]);
