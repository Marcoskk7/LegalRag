"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[290],{48551:function(le,j,t){t.r(j),t.d(j,{default:function(){return H}});var R=t(26068),y=t.n(R),L=t(90228),p=t.n(L),I=t(87999),x=t.n(I),O=t(48305),f=t.n(O),X=t(54134),$=t(43953),z=t(97365),i=t(31707),M=t(34991),V=t(27374),W=t(97150),m=t(75271),a=t(52676),k=z.Z.Dragger,G=function(){var J=(0,m.useState)(""),T=f()(J,2),C=T[0],h=T[1],K=(0,m.useState)(!1),D=f()(K,2),b=D[0],v=D[1],Q=(0,m.useState)([]),S=f()(Q,2),Y=S[0],A=S[1],q=(0,m.useState)(!1),w=f()(q,2),_=w[0],F=w[1],ee=(0,m.useState)(""),P=f()(ee,2),N=P[0],E=P[1],ae=(0,m.useState)(""),U=f()(ae,2),g=U[0],B=U[1],ue={NODE_ENV:"production",PUBLIC_PATH:"/"}.UMI_APP_API_BASE_URL||"",re="".concat(ue,"/api/v1/upload"),Z=function(){var d=x()(p()().mark(function l(o){var r,n;return p()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return r=new FormData,r.append("file",o),s.next=4,fetch(re,{method:"POST",body:r});case 4:if(n=s.sent,n.ok){s.next=7;break}throw new Error("HTTP ".concat(n.status));case 7:return s.next=9,n.json();case 9:return s.abrupt("return",s.sent);case 10:case"end":return s.stop()}},l)}));return function(o){return d.apply(this,arguments)}}(),te={name:"file",multiple:!1,showUploadList:!0,maxCount:1,fileList:Y,accept:".pdf,.doc,.docx,.txt",onChange:function(l){A(l.fileList.slice(-1))},onRemove:function(){return h(""),F(!1),E(""),B(""),!0},beforeUpload:function(){var d=x()(p()().mark(function o(r){var n,u;return p()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain"],n.includes(r.type)){e.next=4;break}return i.ZP.error("\u53EA\u652F\u6301\u4E0A\u4F20 PDF\u3001Word \u6216 TXT \u6587\u4EF6\uFF01"),e.abrupt("return",!1);case 4:if(!(r.size/1024/1024>50)){e.next=7;break}return i.ZP.error("\u6587\u4EF6\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7 50MB\uFF01"),e.abrupt("return",!1);case 7:if(r.type!=="text/plain"){e.next=22;break}return e.prev=8,e.next=11,r.text();case 11:return u=e.sent,E(u),B(r.name),F(!0),e.abrupt("return",!1);case 18:return e.prev=18,e.t0=e.catch(8),i.ZP.error("\u8BFB\u53D6 TXT \u6587\u4EF6\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),e.abrupt("return",!1);case 22:return e.abrupt("return",!0);case 23:case"end":return e.stop()}},o,null,[[8,18]])}));function l(o){return d.apply(this,arguments)}return l}(),customRequest:function(){var d=x()(p()().mark(function o(r){var n,u,s,e;return p()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return n=r.file,u=r.onError,s=r.onSuccess,c.prev=1,v(!0),c.next=5,Z(n);case 5:e=c.sent,v(!1),e!=null&&e.success?(i.ZP.success("".concat(n.name," \u4E0A\u4F20\u6210\u529F\uFF01")),h(e.data.uuid),s==null||s(e,n)):(i.ZP.error((e==null?void 0:e.message)||"\u4E0A\u4F20\u5931\u8D25"),u==null||u(new Error((e==null?void 0:e.message)||"upload failed"))),c.next=15;break;case 10:c.prev=10,c.t0=c.catch(1),v(!1),i.ZP.error("".concat(n.name," \u4E0A\u4F20\u5931\u8D25")),u==null||u(c.t0);case 15:case"end":return c.stop()}},o,null,[[1,10]])}));function l(o){return d.apply(this,arguments)}return l}()},se=function(){var d=x()(p()().mark(function l(){var o,r;return p()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(g){u.next=3;break}return i.ZP.warning("\u672A\u68C0\u6D4B\u5230\u5F85\u7F16\u8F91\u7684 TXT \u6587\u4EF6"),u.abrupt("return");case 3:return u.prev=3,v(!0),o=new File([N],g,{type:"text/plain"}),u.next=8,Z(o);case 8:r=u.sent,v(!1),r!=null&&r.success?(i.ZP.success("".concat(g," \u4E0A\u4F20\u6210\u529F\uFF01")),h(r.data.uuid),F(!1),A([{uid:"".concat(Date.now()),name:g,status:"done",percent:100,response:r}])):i.ZP.error((r==null?void 0:r.message)||"\u4E0A\u4F20\u5931\u8D25"),u.next=17;break;case 13:u.prev=13,u.t0=u.catch(3),v(!1),i.ZP.error("\u4E0A\u4F20\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5");case 17:case"end":return u.stop()}},l,null,[[3,13]])}));return function(){return d.apply(this,arguments)}}(),ne=function(){if(!C){i.ZP.warning("\u8BF7\u5148\u4E0A\u4F20\u6587\u4EF6");return}$.history.push("/contract-analysis?fileId=".concat(C))};return(0,a.jsx)("div",{className:"min-h-[calc(100vh-64px)] bg-gradient-to-b from-slate-50 to-white px-4 py-10 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"w-full max-w-3xl rounded-2xl bg-white border border-slate-100 shadow-xl overflow-hidden",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-r from-brand-600 to-blue-500 px-6 py-4 flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-semibold tracking-wide text-brand-50/80 uppercase",children:"LegalRag"}),(0,a.jsx)("p",{className:"text-sm text-brand-50",children:"\u5408\u540C\u667A\u80FD\u5BA1\u67E5\u7CFB\u7EDF"})]}),(0,a.jsx)("span",{className:"rounded-full border border-white/30 bg-white/10 px-3 py-1 text-xs text-brand-50",children:"\u4E0A\u4F20 \xB7 \u5206\u6790 \xB7 \u98CE\u9669\u8BC4\u4F30"})]}),(0,a.jsxs)("div",{className:"px-6 py-8",children:[(0,a.jsxs)("div",{className:"mb-8 text-center space-y-2",children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold text-slate-900",children:"\u5408\u540C\u667A\u80FD\u5BA1\u67E5\u7CFB\u7EDF"}),(0,a.jsx)("p",{className:"text-sm text-slate-500",children:"\u4E0A\u4F20\u5408\u540C\u6587\u4EF6\uFF0CAI \u4E3A\u60A8\u8FDB\u884C\u98CE\u9669\u8BC6\u522B\u548C\u6CD5\u5F8B\u5BA1\u67E5"})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(k,y()(y()({},te),{},{className:"bg-slate-50 border-2 border-dashed border-slate-200 hover:border-brand-500 rounded-xl transition-colors",children:[(0,a.jsx)("p",{className:"ant-upload-drag-icon text-brand-500 text-4xl",children:(0,a.jsx)(X.Z,{})}),(0,a.jsx)("p",{className:"ant-upload-text text-slate-800 font-medium",children:"\u70B9\u51FB\u6216\u62D6\u62FD\u6587\u4EF6\u5230\u6B64\u533A\u57DF\u4E0A\u4F20"}),(0,a.jsx)("p",{className:"ant-upload-hint text-slate-500 text-xs md:text-sm",children:"\u652F\u6301 PDF\u3001Word (doc/docx) \u548C TXT \u683C\u5F0F\uFF0C\u5355\u4E2A\u6587\u4EF6\u4E0D\u8D85\u8FC7 50MB"})]})),(0,a.jsx)(M.Z,{title:"\u7F16\u8F91 TXT \u5185\u5BB9",open:_,okText:"\u4FDD\u5B58\u5E76\u4E0A\u4F20",cancelText:"\u53D6\u6D88",confirmLoading:b,onOk:se,onCancel:function(){F(!1),E(""),B(""),A([]),h("")},width:900,destroyOnClose:!0,children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("div",{className:"text-xs text-slate-500",children:"\u4EC5\u5BF9 TXT \u6587\u4EF6\u652F\u6301\u5728\u7EBF\u4FEE\u6539\uFF1BPDF/Word \u8BF7\u76F4\u63A5\u4E0A\u4F20\u3002"}),(0,a.jsx)(V.Z.TextArea,{value:N,onChange:function(l){return E(l.target.value)},autoSize:{minRows:16,maxRows:28}})]})}),(0,a.jsxs)("div",{className:"flex flex-col gap-3 text-xs md:text-sm text-slate-500 md:flex-row md:items-center md:justify-between",children:[(0,a.jsx)("span",{children:"\u4E0A\u4F20\u5B8C\u6210\u540E\uFF0C\u6211\u4EEC\u4F1A\u81EA\u52A8\u4E3A\u60A8\u751F\u6210\u98CE\u9669\u5217\u8868\u3001\u4FEE\u6539\u5EFA\u8BAE\u548C\u9002\u7528\u6CD5\u5F8B\u6761\u6B3E\u3002"}),(0,a.jsx)(W.ZP,{type:"primary",size:"large",disabled:!C||b,loading:b,className:"md:w-40 w-full !h-11 !rounded-xl bg-brand-600 hover:bg-brand-700",onClick:ne,children:"\u5F00\u59CB\u667A\u80FD\u5206\u6790"})]})]})]})]})})},H=G}}]);
