"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[519],{48214:function(zt,Ie,u){u.r(Ie),u.d(Ie,{default:function(){return It}});var Ve=u(90228),M=u.n(Ve),Xe=u(87999),J=u.n(Xe),Ue=u(48305),K=u.n(Ue),Je=u(39321),te=u(43953),ne=u(31707),o=u(75271),Ke=u(82187),X=u.n(Ke),ke=u(18051),ze=u(32218),Ce=u(9943),we=u(5856),Qe=u(96074),re=u(85968),z=u(90906),Ye=u(84432),Pe=u(36234),Te=u(83509),he=u(83437);const qe=e=>{const{paddingXXS:t,lineWidth:s,tagPaddingHorizontal:r,componentCls:i,calc:d}=e,b=d(r).sub(s).equal(),E=d(t).sub(s).equal();return{[i]:Object.assign(Object.assign({},(0,Pe.Wf)(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:b,fontSize:e.tagFontSize,lineHeight:e.tagLineHeight,whiteSpace:"nowrap",background:e.defaultBg,border:`${(0,z.bf)(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,opacity:1,transition:`all ${e.motionDurationMid}`,textAlign:"start",position:"relative",[`&${i}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:e.defaultColor},[`${i}-close-icon`]:{marginInlineStart:E,fontSize:e.tagIconSize,color:e.colorIcon,cursor:"pointer",transition:`all ${e.motionDurationMid}`,"&:hover":{color:e.colorTextHeading}},[`&${i}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${e.iconCls}-close, ${e.iconCls}-close:hover`]:{color:e.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${i}-checkable-checked):hover`]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},"&-hidden":{display:"none"},[`> ${e.iconCls} + span, > span + ${e.iconCls}`]:{marginInlineStart:b}}),[`${i}-borderless`]:{borderColor:"transparent",background:e.tagBorderlessBg}}},$e=e=>{const{lineWidth:t,fontSizeIcon:s,calc:r}=e,i=e.fontSizeSM;return(0,Te.IX)(e,{tagFontSize:i,tagLineHeight:(0,z.bf)(r(e.lineHeightSM).mul(i).equal()),tagIconSize:r(s).sub(r(t).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:e.defaultBg})},Se=e=>({defaultBg:new Ye.t(e.colorFillQuaternary).onBackground(e.colorBgContainer).toHexString(),defaultColor:e.colorText});var Oe=(0,he.I$)("Tag",e=>{const t=$e(e);return qe(t)},Se),_e=function(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(s[r[i]]=e[r[i]]);return s},et=o.forwardRef((e,t)=>{const{prefixCls:s,style:r,className:i,checked:d,children:b,icon:E,onChange:g,onClick:S}=e,O=_e(e,["prefixCls","style","className","checked","children","icon","onChange","onClick"]),{getPrefixCls:w,tag:h}=o.useContext(re.E_),N=F=>{g==null||g(!d),S==null||S(F)},$=w("tag",s),[m,A,B]=Oe($),P=X()($,`${$}-checkable`,{[`${$}-checkable-checked`]:d},h==null?void 0:h.className,i,A,B);return m(o.createElement("span",Object.assign({},O,{ref:t,style:Object.assign(Object.assign({},r),h==null?void 0:h.style),className:P,onClick:N}),E,o.createElement("span",null,b)))}),tt=u(66291);const nt=e=>(0,tt.Z)(e,(t,{textColor:s,lightBorderColor:r,lightColor:i,darkColor:d})=>({[`${e.componentCls}${e.componentCls}-${t}`]:{color:s,background:i,borderColor:r,"&-inverse":{color:e.colorTextLightSolid,background:d,borderColor:d},[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}));var rt=(0,he.bk)(["Tag","preset"],e=>{const t=$e(e);return nt(t)},Se);function at(e){return typeof e!="string"?e:e.charAt(0).toUpperCase()+e.slice(1)}const ve=(e,t,s)=>{const r=at(s);return{[`${e.componentCls}${e.componentCls}-${t}`]:{color:e[`color${s}`],background:e[`color${r}Bg`],borderColor:e[`color${r}Border`],[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}};var st=(0,he.bk)(["Tag","status"],e=>{const t=$e(e);return[ve(t,"success","Success"),ve(t,"processing","Info"),ve(t,"error","Error"),ve(t,"warning","Warning")]},Se),it=function(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(s[r[i]]=e[r[i]]);return s};const Fe=o.forwardRef((e,t)=>{const{prefixCls:s,className:r,rootClassName:i,style:d,children:b,icon:E,color:g,onClose:S,bordered:O=!0,visible:w}=e,h=it(e,["prefixCls","className","rootClassName","style","children","icon","color","onClose","bordered","visible"]),{getPrefixCls:N,direction:$,tag:m}=o.useContext(re.E_),[A,B]=o.useState(!0),P=(0,ke.Z)(h,["closeIcon","closable"]);o.useEffect(()=>{w!==void 0&&B(w)},[w]);const F=(0,ze.o2)(g),L=(0,ze.yT)(g),G=F||L,W=Object.assign(Object.assign({backgroundColor:g&&!G?g:void 0},m==null?void 0:m.style),d),C=N("tag",s),[j,Z,se]=Oe(C),k=X()(C,m==null?void 0:m.className,{[`${C}-${g}`]:G,[`${C}-has-color`]:g&&!G,[`${C}-hidden`]:!A,[`${C}-rtl`]:$==="rtl",[`${C}-borderless`]:!O},r,i,Z,se),Q=H=>{H.stopPropagation(),S==null||S(H),!H.defaultPrevented&&B(!1)},[,ce]=(0,Ce.b)((0,Ce.w)(e),(0,Ce.w)(m),{closable:!1,closeIconRender:H=>{const le=o.createElement("span",{className:`${C}-close-icon`,onClick:Q},H);return(0,we.wm)(H,le,V=>({onClick:_=>{var I;(I=V==null?void 0:V.onClick)===null||I===void 0||I.call(V,_),Q(_)},className:X()(V==null?void 0:V.className,`${C}-close-icon`)}))}}),ie=typeof h.onClick=="function"||b&&b.type==="a",D=E||null,Y=D?o.createElement(o.Fragment,null,D,b&&o.createElement("span",null,b)):b,q=o.createElement("span",Object.assign({},P,{ref:t,className:k,style:W}),Y,ce,F&&o.createElement(rt,{key:"preset",prefixCls:C}),L&&o.createElement(st,{key:"status",prefixCls:C}));return j(ie?o.createElement(Qe.Z,{component:"Tag"},q):q)});Fe.CheckableTag=et;var Ae=Fe,Me=u(74139),Le=u(45011),lt=u(9233),ot=u(91235),He=u(80940),pe=u(15572),Re=u(47844),ct=u(4238),Ze=u(57461),dt=u(83261),ut=u(49234),mt=u(25583),gt=u(31906),ft=u(49534);const je=o.createContext({}),Tt=je.Consumer;var ht=u(3752),We=function(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(s[r[i]]=e[r[i]]);return s};const vt=e=>{var{prefixCls:t,className:s,avatar:r,title:i,description:d}=e,b=We(e,["prefixCls","className","avatar","title","description"]);const{getPrefixCls:E}=(0,o.useContext)(re.E_),g=E("list",t),S=X()(`${g}-item-meta`,s),O=o.createElement("div",{className:`${g}-item-meta-content`},i&&o.createElement("h4",{className:`${g}-item-meta-title`},i),d&&o.createElement("div",{className:`${g}-item-meta-description`},d));return o.createElement("div",Object.assign({},b,{className:S}),r&&o.createElement("div",{className:`${g}-item-meta-avatar`},r),(i||d)&&O)},De=o.forwardRef((e,t)=>{const{prefixCls:s,children:r,actions:i,extra:d,styles:b,className:E,classNames:g,colStyle:S}=e,O=We(e,["prefixCls","children","actions","extra","styles","className","classNames","colStyle"]),{grid:w,itemLayout:h}=(0,o.useContext)(je),{getPrefixCls:N,list:$}=(0,o.useContext)(re.E_),m=C=>{var j,Z;return X()((Z=(j=$==null?void 0:$.item)===null||j===void 0?void 0:j.classNames)===null||Z===void 0?void 0:Z[C],g==null?void 0:g[C])},A=C=>{var j,Z;return Object.assign(Object.assign({},(Z=(j=$==null?void 0:$.item)===null||j===void 0?void 0:j.styles)===null||Z===void 0?void 0:Z[C]),b==null?void 0:b[C])},B=()=>{let C=!1;return o.Children.forEach(r,j=>{typeof j=="string"&&(C=!0)}),C&&o.Children.count(r)>1},P=()=>h==="vertical"?!!d:!B(),F=N("list",s),L=i&&i.length>0&&o.createElement("ul",{className:X()(`${F}-item-action`,m("actions")),key:"actions",style:A("actions")},i.map((C,j)=>o.createElement("li",{key:`${F}-item-action-${j}`},C,j!==i.length-1&&o.createElement("em",{className:`${F}-item-action-split`})))),G=w?"div":"li",W=o.createElement(G,Object.assign({},O,w?{}:{ref:t},{className:X()(`${F}-item`,{[`${F}-item-no-flex`]:!P()},E)}),h==="vertical"&&d?[o.createElement("div",{className:`${F}-item-main`,key:"content"},r,L),o.createElement("div",{className:X()(`${F}-item-extra`,m("extra")),key:"extra",style:A("extra")},d)]:[r,L,(0,we.Tm)(d,{key:"extra"})]);return w?o.createElement(ht.Z,{ref:t,flex:1,style:S},W):W});De.Meta=vt;var pt=De;const xt=e=>{const{listBorderedCls:t,componentCls:s,paddingLG:r,margin:i,itemPaddingSM:d,itemPaddingLG:b,marginLG:E,borderRadiusLG:g}=e,S=(0,z.bf)(e.calc(g).sub(e.lineWidth).equal());return{[t]:{border:`${(0,z.bf)(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:g,[`${s}-header`]:{borderRadius:`${S} ${S} 0 0`},[`${s}-footer`]:{borderRadius:`0 0 ${S} ${S}`},[`${s}-header,${s}-footer,${s}-item`]:{paddingInline:r},[`${s}-pagination`]:{margin:`${(0,z.bf)(i)} ${(0,z.bf)(E)}`}},[`${t}${s}-sm`]:{[`${s}-item,${s}-header,${s}-footer`]:{padding:d}},[`${t}${s}-lg`]:{[`${s}-item,${s}-header,${s}-footer`]:{padding:b}}}},yt=e=>{const{componentCls:t,screenSM:s,screenMD:r,marginLG:i,marginSM:d,margin:b}=e;return{[`@media screen and (max-width:${r}px)`]:{[t]:{[`${t}-item`]:{[`${t}-item-action`]:{marginInlineStart:i}}},[`${t}-vertical`]:{[`${t}-item`]:{[`${t}-item-extra`]:{marginInlineStart:i}}}},[`@media screen and (max-width: ${s}px)`]:{[t]:{[`${t}-item`]:{flexWrap:"wrap",[`${t}-action`]:{marginInlineStart:d}}},[`${t}-vertical`]:{[`${t}-item`]:{flexWrap:"wrap-reverse",[`${t}-item-main`]:{minWidth:e.contentWidth},[`${t}-item-extra`]:{margin:`auto auto ${(0,z.bf)(b)}`}}}}}},bt=e=>{const{componentCls:t,antCls:s,controlHeight:r,minHeight:i,paddingSM:d,marginLG:b,padding:E,itemPadding:g,colorPrimary:S,itemPaddingSM:O,itemPaddingLG:w,paddingXS:h,margin:N,colorText:$,colorTextDescription:m,motionDurationSlow:A,lineWidth:B,headerBg:P,footerBg:F,emptyTextPadding:L,metaMarginBottom:G,avatarMarginRight:W,titleMarginBottom:C,descriptionFontSize:j}=e;return{[t]:Object.assign(Object.assign({},(0,Pe.Wf)(e)),{position:"relative","--rc-virtual-list-scrollbar-bg":e.colorSplit,"*":{outline:"none"},[`${t}-header`]:{background:P},[`${t}-footer`]:{background:F},[`${t}-header, ${t}-footer`]:{paddingBlock:d},[`${t}-pagination`]:{marginBlockStart:b,[`${s}-pagination-options`]:{textAlign:"start"}},[`${t}-spin`]:{minHeight:i,textAlign:"center"},[`${t}-items`]:{margin:0,padding:0,listStyle:"none"},[`${t}-item`]:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:g,color:$,[`${t}-item-meta`]:{display:"flex",flex:1,alignItems:"flex-start",maxWidth:"100%",[`${t}-item-meta-avatar`]:{marginInlineEnd:W},[`${t}-item-meta-content`]:{flex:"1 0",width:0,color:$},[`${t}-item-meta-title`]:{margin:`0 0 ${(0,z.bf)(e.marginXXS)} 0`,color:$,fontSize:e.fontSize,lineHeight:e.lineHeight,"> a":{color:$,transition:`all ${A}`,"&:hover":{color:S}}},[`${t}-item-meta-description`]:{color:m,fontSize:j,lineHeight:e.lineHeight}},[`${t}-item-action`]:{flex:"0 0 auto",marginInlineStart:e.marginXXL,padding:0,fontSize:0,listStyle:"none","& > li":{position:"relative",display:"inline-block",padding:`0 ${(0,z.bf)(h)}`,color:m,fontSize:e.fontSize,lineHeight:e.lineHeight,textAlign:"center","&:first-child":{paddingInlineStart:0}},[`${t}-item-action-split`]:{position:"absolute",insetBlockStart:"50%",insetInlineEnd:0,width:B,height:e.calc(e.fontHeight).sub(e.calc(e.marginXXS).mul(2)).equal(),transform:"translateY(-50%)",backgroundColor:e.colorSplit}}},[`${t}-empty`]:{padding:`${(0,z.bf)(E)} 0`,color:m,fontSize:e.fontSizeSM,textAlign:"center"},[`${t}-empty-text`]:{padding:L,color:e.colorTextDisabled,fontSize:e.fontSize,textAlign:"center"},[`${t}-item-no-flex`]:{display:"block"}}),[`${t}-grid ${s}-col > ${t}-item`]:{display:"block",maxWidth:"100%",marginBlockEnd:N,paddingBlock:0,borderBlockEnd:"none"},[`${t}-vertical ${t}-item`]:{alignItems:"initial",[`${t}-item-main`]:{display:"block",flex:1},[`${t}-item-extra`]:{marginInlineStart:b},[`${t}-item-meta`]:{marginBlockEnd:G,[`${t}-item-meta-title`]:{marginBlockStart:0,marginBlockEnd:C,color:$,fontSize:e.fontSizeLG,lineHeight:e.lineHeightLG}},[`${t}-item-action`]:{marginBlockStart:E,marginInlineStart:"auto","> li":{padding:`0 ${(0,z.bf)(E)}`,"&:first-child":{paddingInlineStart:0}}}},[`${t}-split ${t}-item`]:{borderBlockEnd:`${(0,z.bf)(e.lineWidth)} ${e.lineType} ${e.colorSplit}`,"&:last-child":{borderBlockEnd:"none"}},[`${t}-split ${t}-header`]:{borderBlockEnd:`${(0,z.bf)(e.lineWidth)} ${e.lineType} ${e.colorSplit}`},[`${t}-split${t}-empty ${t}-footer`]:{borderTop:`${(0,z.bf)(e.lineWidth)} ${e.lineType} ${e.colorSplit}`},[`${t}-loading ${t}-spin-nested-loading`]:{minHeight:r},[`${t}-split${t}-something-after-last-item ${s}-spin-container > ${t}-items > ${t}-item:last-child`]:{borderBlockEnd:`${(0,z.bf)(e.lineWidth)} ${e.lineType} ${e.colorSplit}`},[`${t}-lg ${t}-item`]:{padding:w},[`${t}-sm ${t}-item`]:{padding:O},[`${t}:not(${t}-vertical)`]:{[`${t}-item-no-flex`]:{[`${t}-item-action`]:{float:"right"}}}}},Ct=e=>({contentWidth:220,itemPadding:`${(0,z.bf)(e.paddingContentVertical)} 0`,itemPaddingSM:`${(0,z.bf)(e.paddingContentVerticalSM)} ${(0,z.bf)(e.paddingContentHorizontal)}`,itemPaddingLG:`${(0,z.bf)(e.paddingContentVerticalLG)} ${(0,z.bf)(e.paddingContentHorizontalLG)}`,headerBg:"transparent",footerBg:"transparent",emptyTextPadding:e.padding,metaMarginBottom:e.padding,avatarMarginRight:e.padding,titleMarginBottom:e.paddingSM,descriptionFontSize:e.fontSize});var $t=(0,he.I$)("List",e=>{const t=(0,Te.IX)(e,{listBorderedCls:`${e.componentCls}-bordered`,minHeight:e.controlHeightLG});return[bt(t),xt(t),yt(t)]},Ct),St=function(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(s[r[i]]=e[r[i]]);return s};function jt(e,t){const{pagination:s=!1,prefixCls:r,bordered:i=!1,split:d=!0,className:b,rootClassName:E,style:g,children:S,itemLayout:O,loadMore:w,grid:h,dataSource:N=[],size:$,header:m,footer:A,loading:B=!1,rowKey:P,renderItem:F,locale:L}=e,G=St(e,["pagination","prefixCls","bordered","split","className","rootClassName","style","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]),W=s&&typeof s=="object"?s:{},[C,j]=o.useState(W.defaultCurrent||1),[Z,se]=o.useState(W.defaultPageSize||10),{getPrefixCls:k,direction:Q,className:ce,style:ie}=(0,re.dj)("list"),{renderEmpty:D}=o.useContext(re.E_),Y={current:1,total:0,position:"bottom"},q=y=>(T,v)=>{var ee;j(T),se(v),s&&((ee=s==null?void 0:s[y])===null||ee===void 0||ee.call(s,T,v))},H=q("onChange"),le=q("onShowSizeChange"),V=(y,T)=>{if(!F)return null;let v;return typeof P=="function"?v=P(y):P?v=y[P]:v=y.key,v||(v=`list-item-${T}`),o.createElement(o.Fragment,{key:v},F(y,T))},_=!!(w||s||A),I=k("list",r),[de,xe,ye]=$t(I);let U=B;typeof U=="boolean"&&(U={spinning:U});const ue=!!(U!=null&&U.spinning),Ee=(0,ut.Z)($);let oe="";switch(Ee){case"large":oe="lg";break;case"small":oe="sm";break;default:break}const me=X()(I,{[`${I}-vertical`]:O==="vertical",[`${I}-${oe}`]:oe,[`${I}-split`]:d,[`${I}-bordered`]:i,[`${I}-loading`]:ue,[`${I}-grid`]:!!h,[`${I}-something-after-last-item`]:_,[`${I}-rtl`]:Q==="rtl"},ce,b,E,xe,ye),R=(0,ct.Z)(Y,{total:N.length,current:C,pageSize:Z},s||{}),be=Math.ceil(R.total/R.pageSize);R.current=Math.min(R.current,be);const ge=s&&o.createElement("div",{className:X()(`${I}-pagination`)},o.createElement(ft.Z,Object.assign({align:"end"},R,{onChange:H,onShowSizeChange:le})));let fe=(0,Re.Z)(N);s&&N.length>(R.current-1)*R.pageSize&&(fe=(0,Re.Z)(N).splice((R.current-1)*R.pageSize,R.pageSize));const Be=Object.keys(h||{}).some(y=>["xs","sm","md","lg","xl","xxl"].includes(y)),p=(0,gt.Z)(Be),a=o.useMemo(()=>{for(let y=0;y<Ze.c4.length;y+=1){const T=Ze.c4[y];if(p[T])return T}},[p]),c=o.useMemo(()=>{if(!h)return;const y=a&&h[a]?h[a]:h.column;if(y)return{width:`${100/y}%`,maxWidth:`${100/y}%`}},[JSON.stringify(h),a]);let l=ue&&o.createElement("div",{style:{minHeight:53}});if(fe.length>0){const y=fe.map(V);l=h?o.createElement(mt.Z,{gutter:h.gutter},o.Children.map(y,T=>o.createElement("div",{key:T==null?void 0:T.key,style:c},T))):o.createElement("ul",{className:`${I}-items`},y)}else!S&&!ue&&(l=o.createElement("div",{className:`${I}-empty-text`},(L==null?void 0:L.emptyText)||(D==null?void 0:D("List"))||o.createElement(dt.Z,{componentName:"List"})));const x=R.position,f=o.useMemo(()=>({grid:h,itemLayout:O}),[JSON.stringify(h),O]);return de(o.createElement(je.Provider,{value:f},o.createElement("div",Object.assign({ref:t,style:Object.assign(Object.assign({},ie),g),className:me},G),(x==="top"||x==="both")&&ge,m&&o.createElement("div",{className:`${I}-header`},m),o.createElement(Le.Z,Object.assign({},U),l,S),A&&o.createElement("div",{className:`${I}-footer`},A),w||(x==="bottom"||x==="both")&&ge)))}const Ge=o.forwardRef(jt);Ge.Item=pt;var ae=Ge,Nt=u(92309),n=u(52676),Ne="http://127.0.0.1:8080",Et=function(t){var s=[],r=[],i=[];return t.risks.forEach(function(d,b){var E="risk-".concat(d.identifier),g=d.detected_issue,S=g.match(/^(.{0,25})/),O=S?S[1]+(g.length>25?"...":""):"\u98CE\u9669\u63D0\u793A",w=d.legal_basis.map(function(B,P){return{id:"legal-".concat(d.identifier,"-").concat(P),lawName:B.law_name,article:B.order,content:B.content,score:B.relevance_score,explanation:void 0,relatedRange:d.highlight_range}});w.forEach(function(B){r.find(function(P){return P.lawName===B.lawName&&P.article===B.article})||r.push(B)});var h={id:E,level:d.level,title:O,content:d.detected_issue,suggestion:d.suggestions,highlightRange:d.highlight_range,legalBasis:w};if(s.push(h),d.suggestions){var N="";if(t.raw_content&&d.highlight_range){var $=d.highlight_range,m=$.start,A=$.end;m>=0&&A<=t.raw_content.length&&(N=t.raw_content.substring(m,A))}N?N.length>100&&(N=N.substring(0,100)+"..."):N=g.substring(0,50)+(g.length>50?"...":""),i.push({id:"sug-".concat(d.identifier),original:N,revised:d.suggestions,reason:"\u9488\u5BF9\u98CE\u9669\uFF1A".concat(O),highlightRange:d.highlight_range})}}),{contractText:t.raw_content,risks:s,suggestions:i,legalBasis:r}},Bt=function(){var t=(0,te.useSearchParams)(),s=K()(t,1),r=s[0],i=r.get("fileId"),d=(0,o.useState)(!0),b=K()(d,2),E=b[0],g=b[1],S=(0,o.useState)("init"),O=K()(S,2),w=O[0],h=O[1],N=(0,o.useState)(null),$=K()(N,2),m=$[0],A=$[1],B=(0,o.useState)(""),P=K()(B,2),F=P[0],L=P[1],G=(0,o.useState)(!1),W=K()(G,2),C=W[0],j=W[1],Z=(0,o.useState)(null),se=K()(Z,2),k=se[0],Q=se[1],ce=(0,o.useState)("risk"),ie=K()(ce,2),D=ie[0],Y=ie[1],q=(0,o.useRef)(null),H=(0,o.useRef)(null);(0,o.useEffect)(function(){if(!i){ne.ZP.error("\u7F3A\u5C11\u6587\u4EF6ID\uFF0C\u8BF7\u91CD\u65B0\u4E0A\u4F20"),te.history.push("/");return}return I(),function(){H.current&&clearTimeout(H.current)}},[i]);var le=function(){var p=J()(M()().mark(function a(){return M()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,(0,te.request)("".concat(Ne,"/api/v1/documents/").concat(i,"/risks/status"),{method:"GET"});case 3:return l.abrupt("return",l.sent);case 6:return l.prev=6,l.t0=l.catch(0),console.error("Fetch status error:",l.t0),l.abrupt("return",null);case 10:case"end":return l.stop()}},a,null,[[0,6]])}));return function(){return p.apply(this,arguments)}}(),V=function(){var p=J()(M()().mark(function a(){return M()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,(0,te.request)("".concat(Ne,"/api/v1/documents/").concat(i,"/risks"),{method:"GET"});case 3:return l.abrupt("return",l.sent);case 6:return l.prev=6,l.t0=l.catch(0),console.error("Fetch risks error:",l.t0),l.abrupt("return",null);case 10:case"end":return l.stop()}},a,null,[[0,6]])}));return function(){return p.apply(this,arguments)}}(),_=function(){var p=J()(M()().mark(function a(){return M()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,(0,te.request)("".concat(Ne,"/api/v1/documents/").concat(i,"/risks/analyze"),{method:"POST",data:{top_k:3}});case 3:return l.abrupt("return",l.sent);case 6:return l.prev=6,l.t0=l.catch(0),console.error("Trigger analysis error:",l.t0),l.abrupt("return",null);case 10:case"end":return l.stop()}},a,null,[[0,6]])}));return function(){return p.apply(this,arguments)}}(),I=function(){var p=J()(M()().mark(function a(){var c,l;return M()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:g(!0),c=null,l=0;case 3:if(!(l<3)){f.next=14;break}return f.next=6,le();case 6:if(c=f.sent,!c){f.next=9;break}return f.abrupt("break",14);case 9:return f.next=11,new Promise(function(y){return setTimeout(y,1e3)});case 11:l++,f.next=3;break;case 14:if(c){f.next=19;break}return console.log("Status check failed, attempting to trigger analysis directly..."),f.next=18,de();case 18:return f.abrupt("return");case 19:if(c.status!=="success"){f.next=25;break}return h("success"),f.next=23,ye();case 23:f.next=32;break;case 25:if(c.status!=="analyzing"){f.next=30;break}h("analyzing"),xe(),f.next=32;break;case 30:return f.next=32,de();case 32:case"end":return f.stop()}},a)}));return function(){return p.apply(this,arguments)}}(),de=function(){var p=J()(M()().mark(function a(){var c;return M()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return h("analyzing"),x.next=3,_();case 3:if(c=x.sent,c){x.next=11;break}return console.log("First analysis trigger failed, retrying in 1s..."),x.next=8,new Promise(function(f){return setTimeout(f,1e3)});case 8:return x.next=10,_();case 10:c=x.sent;case 11:c&&c.status==="analyzing"?(ne.ZP.info("\u5F00\u59CB\u667A\u80FD\u5206\u6790..."),xe()):(h("failed"),g(!1),ne.ZP.error("\u89E6\u53D1\u5206\u6790\u5931\u8D25\uFF0C\u53EF\u80FD\u662F\u6587\u6863\u5C1A\u672A\u51C6\u5907\u597D\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5"));case 12:case"end":return x.stop()}},a)}));return function(){return p.apply(this,arguments)}}(),xe=function p(){H.current&&clearTimeout(H.current),H.current=setTimeout(J()(M()().mark(function a(){var c;return M()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,le();case 2:if(c=x.sent,c){x.next=6;break}return p(),x.abrupt("return");case 6:if(c.status!=="success"){x.next=13;break}return h("success"),ne.ZP.success("\u5206\u6790\u5B8C\u6210\uFF01"),x.next=11,ye();case 11:x.next=14;break;case 13:c.status==="failed"?(h("failed"),g(!1),ne.ZP.error(c.error||"\u5206\u6790\u5931\u8D25")):p();case 14:case"end":return x.stop()}},a)})),2e3)},ye=function(){var p=J()(M()().mark(function a(){var c,l;return M()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,V();case 2:c=f.sent,c&&c.status==="success"?(l=Et(c),A(l)):ne.ZP.error("\u83B7\u53D6\u5206\u6790\u7ED3\u679C\u5931\u8D25"),g(!1);case 5:case"end":return f.stop()}},a)}));return function(){return p.apply(this,arguments)}}(),U=function(){var p=J()(M()().mark(function a(){return M()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(i){l.next=2;break}return l.abrupt("return");case 2:return g(!0),l.next=5,de();case 5:case"end":return l.stop()}},a)}));return function(){return p.apply(this,arguments)}}(),ue=function(){te.history.push("/")},Ee=function(){if(!m||!m.contractText)return(0,n.jsx)("div",{className:"text-gray-400 text-center py-10",children:"\u6682\u65E0\u5408\u540C\u6587\u672C\u5185\u5BB9"});var a=m.contractText,c=m.risks,l=m.suggestions,x=m.legalBasis,f=[];c.forEach(function(v){f.push({range:v.highlightRange,type:"risk",id:v.id})}),l.forEach(function(v){f.push({range:v.highlightRange,type:"suggestion",id:v.id})}),x.forEach(function(v){f.push({range:v.relatedRange,type:"legal",id:v.id})}),f.sort(function(v,ee){return v.range.start-ee.range.start});var y=[],T=0;return f.forEach(function(v,ee){v.range.start<T||v.range.end>a.length||(v.range.start>T&&y.push((0,n.jsx)("span",{children:a.substring(T,v.range.start)},"text-".concat(ee))),y.push((0,n.jsx)("mark",{className:"highlight ".concat(v.type," ").concat(F===v.id?"active":""),id:v.id,onClick:function(){return oe(v.type,v.id)},children:a.substring(v.range.start,v.range.end)},"highlight-".concat(v.id))),T=v.range.end)}),T<a.length&&y.push((0,n.jsx)("span",{children:a.substring(T)},"text-end")),y},oe=function(a,c){if(L(c),a==="risk"){var l=m==null?void 0:m.risks.find(function(y){return y.id===c});l&&R(l)}else if(a==="suggestion"){var x=m==null?void 0:m.suggestions.find(function(y){return y.id===c});x&&be(x)}else if(a==="legal"){var f=m==null?void 0:m.legalBasis.find(function(y){return y.id===c});f&&ge(f)}},me=function(a){L(a);var c=document.getElementById(a);c&&c.scrollIntoView({behavior:"smooth",block:"center"})},R=function(a){Y("risk"),Q(a),j(!0)},be=function(a){Y("suggestion"),Q(a),j(!0)},ge=function(a){Y("legal"),Q(a),j(!0)},fe=function(){if(!k)return null;if(D==="risk"){var a=k;return(0,n.jsxs)("div",{className:"detail-modal",children:[(0,n.jsxs)("div",{className:"modal-section",children:[(0,n.jsx)("div",{className:"section-label",children:"\u98CE\u9669\u7B49\u7EA7"}),(0,n.jsx)(Ae,{color:a.level==="high"?"red":a.level==="medium"?"orange":"green",children:a.level==="high"?"\u9AD8\u98CE\u9669":a.level==="medium"?"\u4E2D\u98CE\u9669":"\u4F4E\u98CE\u9669"})]}),(0,n.jsxs)("div",{className:"modal-section",children:[(0,n.jsx)("div",{className:"section-label",children:"\u98CE\u9669\u63CF\u8FF0"}),(0,n.jsx)("div",{className:"section-content",children:a.content})]}),a.suggestion&&(0,n.jsxs)("div",{className:"modal-section",children:[(0,n.jsx)("div",{className:"section-label",children:"\u5EFA\u8BAE\u63AA\u65BD"}),(0,n.jsx)("div",{className:"section-content",children:a.suggestion})]})]})}if(D==="suggestion"){var c=k;return(0,n.jsxs)("div",{className:"detail-modal",children:[(0,n.jsxs)("div",{className:"diff-display",children:[(0,n.jsxs)("div",{className:"diff-row",children:[(0,n.jsx)("div",{className:"diff-label",children:"\u539F\u6587"}),(0,n.jsx)("div",{className:"diff-content original",children:c.original})]}),(0,n.jsxs)("div",{className:"diff-row",children:[(0,n.jsx)("div",{className:"diff-label",children:"\u4FEE\u6539\u4E3A"}),(0,n.jsx)("div",{className:"diff-content revised",children:c.revised})]})]}),c.reason&&(0,n.jsxs)("div",{className:"modal-section",children:[(0,n.jsx)("div",{className:"section-label",children:"\u4FEE\u6539\u7406\u7531"}),(0,n.jsx)("div",{className:"section-content",children:c.reason})]})]})}if(D==="legal"){var l=k;return(0,n.jsxs)("div",{className:"detail-modal",children:[(0,n.jsxs)("div",{className:"modal-section",children:[(0,n.jsx)("div",{className:"section-label",children:"\u6CD5\u5F8B\u540D\u79F0"}),(0,n.jsx)("div",{className:"section-content",children:l.lawName})]}),(0,n.jsxs)("div",{className:"modal-section",children:[(0,n.jsx)("div",{className:"section-label",children:"\u6761\u6B3E"}),(0,n.jsx)("div",{className:"section-content",children:l.article})]}),(0,n.jsxs)("div",{className:"modal-section",children:[(0,n.jsx)("div",{className:"section-label",children:"\u6CD5\u6761\u5185\u5BB9"}),(0,n.jsx)("div",{className:"section-content",children:l.content})]}),(0,n.jsxs)("div",{className:"modal-section",children:[(0,n.jsx)("div",{className:"section-label",children:"\u76F8\u5173\u5EA6\u8BC4\u5206"}),(0,n.jsxs)("div",{className:"legal-score",children:[(0,n.jsx)(Me.Z,{disabled:!0,allowHalf:!0,value:l.score*5}),(0,n.jsxs)("span",{style:{marginLeft:8},children:[(l.score*100).toFixed(0),"%"]})]})]}),l.explanation&&(0,n.jsxs)("div",{className:"modal-section",children:[(0,n.jsx)("div",{className:"section-label",children:"\u9002\u7528\u8BF4\u660E"}),(0,n.jsx)("div",{className:"section-content",children:l.explanation})]})]})}},Be=function(){return D==="risk"?"\u98CE\u9669\u8BE6\u60C5":D==="suggestion"?"\u4FEE\u6539\u5EFA\u8BAE\u8BE6\u60C5":"\u6CD5\u5F8B\u4F9D\u636E\u8BE6\u60C5"};return E?(0,n.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white flex items-center justify-center px-4",children:(0,n.jsxs)("div",{className:"w-full max-w-md rounded-2xl bg-white border border-slate-100 shadow-xl px-8 py-10 text-center space-y-4",children:[(0,n.jsx)("div",{className:"bg-gradient-to-r from-brand-600 to-blue-500 inline-flex items-center justify-center rounded-full px-4 py-1 text-xs font-medium text-white",children:w==="analyzing"?"\u5408\u540C\u667A\u80FD\u5206\u6790\u8FDB\u884C\u4E2D\u2026":"\u6B63\u5728\u51C6\u5907\u5206\u6790..."}),(0,n.jsx)("p",{className:"text-sm text-slate-500",children:"\u6211\u4EEC\u6B63\u5728\u4E3A\u60A8\u89E3\u6790\u5408\u540C\u6761\u6B3E\u5E76\u751F\u6210\u98CE\u9669\u63D0\u793A\u3001\u4FEE\u6539\u610F\u89C1\u4E0E\u6CD5\u5F8B\u4F9D\u636E\uFF0C\u8BF7\u7A0D\u5019\u3002"}),(0,n.jsx)("div",{className:"flex justify-center pt-2",children:(0,n.jsx)(Le.Z,{size:"large",tip:w==="analyzing"?"\u6B63\u5728\u5206\u6790\u5408\u540C...":"\u6B63\u5728\u52A0\u8F7D..."})})]})}):(0,n.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white px-4 py-6",children:(0,n.jsxs)("div",{className:"mx-auto max-w-6xl rounded-2xl bg-white border border-slate-100 shadow-xl overflow-hidden",children:[(0,n.jsxs)("div",{className:"bg-gradient-to-r from-brand-600 to-blue-500 px-6 py-4 flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-xs font-semibold tracking-wide text-brand-50/80 uppercase",children:"LegalRag"}),(0,n.jsx)("p",{className:"text-sm text-brand-50",children:"\u5408\u540C\u5206\u6790\u7ED3\u679C"})]}),(0,n.jsx)("span",{className:"rounded-full border border-white/30 bg-white/10 px-3 py-1 text-xs text-brand-50",children:"\u98CE\u9669\u63D0\u793A \xB7 \u4FEE\u6539\u610F\u89C1 \xB7 \u6CD5\u5F8B\u4F9D\u636E"})]}),(0,n.jsx)("div",{className:"contract-analysis px-4 pb-4 pt-2",children:(0,n.jsxs)(Je._z,{header:{title:"\u5408\u540C\u5206\u6790\u7ED3\u679C",onBack:ue,extra:[(0,n.jsx)(lt.ZP,{onClick:U,children:"\u91CD\u65B0\u5206\u6790"},"reanalyze")]},children:[m&&(0,n.jsx)("div",{className:"analysis-content",children:(0,n.jsxs)(ot.Z,{gutter:24,children:[(0,n.jsx)(He.Z,{span:12,children:(0,n.jsx)(pe.Z,{title:"\u5408\u540C\u6587\u672C",bordered:!1,children:(0,n.jsx)("div",{className:"contract-text-panel",ref:q,children:Ee()})})}),(0,n.jsx)(He.Z,{span:12,children:(0,n.jsxs)("div",{className:"analysis-panel",children:[(0,n.jsxs)("div",{className:"panel-section",children:[(0,n.jsx)("div",{className:"section-title",children:"\u{1F6A8} \u98CE\u9669\u63D0\u793A"}),(0,n.jsx)(ae,{dataSource:m.risks,renderItem:function(a){return(0,n.jsx)(ae.Item,{className:"risk-item",onClick:function(){me(a.id),R(a)},children:(0,n.jsxs)(pe.Z,{size:"small",hoverable:!0,style:{width:"100%"},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(Ae,{className:"risk-level ".concat(a.level),children:a.level==="high"?"\u9AD8":a.level==="medium"?"\u4E2D":"\u4F4E"}),(0,n.jsx)("span",{style:{fontWeight:600,marginLeft:8},children:a.title})]}),(0,n.jsx)("div",{style:{marginTop:8,color:"#666",fontSize:12},children:a.content})]})})}})]}),(0,n.jsxs)("div",{className:"panel-section",children:[(0,n.jsx)("div",{className:"section-title",children:"\u270F\uFE0F \u4FEE\u6539\u610F\u89C1"}),(0,n.jsx)(ae,{dataSource:m.suggestions,renderItem:function(a){return(0,n.jsx)(ae.Item,{className:"suggestion-item",onClick:function(){me(a.id),be(a)},children:(0,n.jsx)(pe.Z,{size:"small",hoverable:!0,style:{width:"100%"},children:(0,n.jsxs)("div",{className:"diff-text",children:[(0,n.jsxs)("div",{style:{marginBottom:8},children:[(0,n.jsx)("span",{style:{color:"#999",fontSize:12},children:"\u539F\u6587\uFF1A"}),(0,n.jsx)("span",{className:"original",children:a.original})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{style:{color:"#999",fontSize:12},children:"\u6539\u4E3A\uFF1A"}),(0,n.jsx)("span",{className:"revised",children:a.revised})]})]})})})}})]}),(0,n.jsxs)("div",{className:"panel-section",children:[(0,n.jsx)("div",{className:"section-title",children:"\u2696\uFE0F \u6CD5\u5F8B\u4F9D\u636E"}),(0,n.jsx)(ae,{dataSource:m.legalBasis,renderItem:function(a){return(0,n.jsx)(ae.Item,{className:"legal-item",onClick:function(){me(a.id),ge(a)},children:(0,n.jsxs)(pe.Z,{size:"small",hoverable:!0,style:{width:"100%"},children:[(0,n.jsxs)("div",{style:{fontWeight:600},children:[a.lawName," ",a.article]}),(0,n.jsxs)("div",{style:{margin:"8px 0",fontSize:12,color:"#666"},children:[a.content.substring(0,50),"..."]}),(0,n.jsxs)("div",{className:"legal-score",children:[(0,n.jsx)(Me.Z,{disabled:!0,allowHalf:!0,value:a.score*5,style:{fontSize:12}}),(0,n.jsxs)("span",{style:{marginLeft:8,fontSize:12},children:["\u76F8\u5173\u5EA6: ",(a.score*100).toFixed(0),"%"]})]})]})})}})]})]})})]})}),(0,n.jsx)(Nt.Z,{title:Be(),open:C,onCancel:function(){return j(!1)},footer:null,width:700,children:fe()})]})})]})})},It=Bt}}]);
