"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[519],{82194:function(An,ae,d){d.r(ae),d.d(ae,{default:function(){return We}});var De=d(90228),g=d.n(De),we=d(87999),C=d.n(we),Se=d(48305),b=d.n(Se),Ne=d(335),ke=d.n(Ne),Pe=d(15558),ze=d.n(Pe),Te=d(86980),k=d(43953),B=d(31707),ie=d(58979),ee=d(74139),Ze=d(45011),le=d(97150),He=d(21307),ue=d(13167),I=d(15572),ce=d(26280),Re=d(56820),Ie=d(71392),M=d(82290),Me=d(49598),Le=d(14774),x=d(75271),e=d(52676),L="http://api.legalrag.studio",h=function(m){return m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},oe=function(m){var F=function(v){return String(v).padStart(2,"0")};return"".concat(m.getFullYear(),"-").concat(F(m.getMonth()+1),"-").concat(F(m.getDate())," ").concat(F(m.getHours()),":").concat(F(m.getMinutes()))},$e=function(m,F){var P=ze()(F).sort(function(z,N){return z.range.start-N.range.start}),v="",A=0,D=ke()(P),S;try{for(D.s();!(S=D.n()).done;){var o=S.value;o.range.start<A||o.range.start<0||o.range.end>m.length||o.range.end<=o.range.start||(v+=h(m.substring(A,o.range.start)),v+='<mark class="hl '.concat(o.type,'">').concat(h(m.substring(o.range.start,o.range.end)),"</mark>"),A=o.range.end)}}catch(z){D.e(z)}finally{D.f()}return v+=h(m.substring(A)),v},Ge=function(m,F){var P,v=[],A=[],D=[],S=(P=F!=null?F:m.raw_content)!==null&&P!==void 0?P:"";return m.risks.forEach(function(o){var z="risk-".concat(o.identifier),N=o.detected_issue,$=N.match(/^(.{0,25})/),T=$?$[1]+(N.length>25?"...":""):"\u98CE\u9669\u63D0\u793A",U=o.legal_basis.map(function(y,H){return{id:"legal-".concat(o.identifier,"-").concat(H),lawName:y.law_name,article:y.order,content:y.content,score:y.relevance_score,explanation:void 0,relatedRange:o.highlight_range}});U.forEach(function(y){A.find(function(H){return H.lawName===y.lawName&&H.article===y.article})||A.push(y)});var J={id:z,identifier:o.identifier,level:o.level,title:T,content:o.detected_issue,suggestion:o.suggestions,highlightRange:o.highlight_range,legalBasis:U};if(v.push(J),o.suggestions){var l="";if(S&&o.highlight_range){var K=o.highlight_range,Q=K.start,G=K.end;Q>=0&&G<=S.length&&(l=S.substring(Q,G))}l?l.length>100&&(l=l.substring(0,100)+"..."):l=N.substring(0,50)+(N.length>50?"...":""),D.push({id:"sug-".concat(o.identifier),original:l,revised:o.suggestions,reason:"\u9488\u5BF9\u98CE\u9669\uFF1A".concat(T),highlightRange:o.highlight_range})}}),{contractText:S||void 0,risks:v,suggestions:D,legalBasis:A}},Oe=function(){var m=(0,k.useSearchParams)(),F=b()(m,1),P=F[0],v=P.get("fileId"),A=(0,x.useState)(!0),D=b()(A,2),S=D[0],o=D[1],z=(0,x.useState)("init"),N=b()(z,2),$=N[0],T=N[1],U=(0,x.useState)(null),J=b()(U,2),l=J[0],K=J[1],Q=(0,x.useState)(""),G=b()(Q,2),y=G[0],H=G[1],Ve=(0,x.useState)(""),de=b()(Ve,2),Ye=de[0],X=de[1],Ue=(0,x.useState)(!1),fe=b()(Ue,2),Je=fe[0],q=fe[1],Ke=(0,x.useState)(null),ve=b()(Ke,2),_=ve[0],ne=ve[1],Qe=(0,x.useState)("risk"),ge=b()(Qe,2),O=ge[0],te=ge[1],Xe=(0,x.useState)(!1),he=b()(Xe,2),qe=he[0],re=he[1],_e=(0,x.useState)(["risks","suggestions","contract"]),me=b()(_e,2),pe=me[0],en=me[1],nn=(0,x.useState)(!0),xe=b()(nn,2),be=xe[0],tn=xe[1],rn=(0,x.useState)(null),ye=b()(rn,2),E=ye[0],Fe=ye[1],sn=(0,x.useRef)(null),W=(0,x.useRef)(null),an=function(){var i=C()(g()().mark(function r(){return g()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,k.request)("".concat(L,"/api/v1/documents/").concat(v,"/risks/status"),{method:"GET"});case 3:return n.abrupt("return",n.sent);case 6:return n.prev=6,n.t0=n.catch(0),console.error("Fetch status error:",n.t0),n.abrupt("return",null);case 10:case"end":return n.stop()}},r,null,[[0,6]])}));return function(){return i.apply(this,arguments)}}(),ln=function(){var i=C()(g()().mark(function r(){var s;return g()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,k.request)("".concat(L,"/api/v1/documents/").concat(v,"/content"),{method:"GET"});case 3:return s=t.sent,s!=null&&s.raw_content&&H(s.raw_content),t.abrupt("return",s);case 8:return t.prev=8,t.t0=t.catch(0),console.error("Fetch document content error:",t.t0),t.abrupt("return",null);case 12:case"end":return t.stop()}},r,null,[[0,8]])}));return function(){return i.apply(this,arguments)}}(),un=function(){var i=C()(g()().mark(function r(){return g()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,k.request)("".concat(L,"/api/v1/documents/").concat(v,"/risks"),{method:"GET"});case 3:return n.abrupt("return",n.sent);case 6:return n.prev=6,n.t0=n.catch(0),console.error("Fetch risks error:",n.t0),n.abrupt("return",null);case 10:case"end":return n.stop()}},r,null,[[0,6]])}));return function(){return i.apply(this,arguments)}}(),je=function(){var i=C()(g()().mark(function r(s){var n;return g()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(v){a.next=2;break}return a.abrupt("return",null);case 2:return a.prev=2,a.next=5,(0,k.request)("".concat(L,"/api/v1/documents/").concat(v,"/risks/").concat(s),{method:"GET"});case 5:return n=a.sent,a.abrupt("return",n);case 9:return a.prev=9,a.t0=a.catch(2),console.error("Fetch risk detail error:",a.t0),B.ZP.error("\u83B7\u53D6\u98CE\u9669\u8BE6\u60C5\u5931\u8D25"),a.abrupt("return",null);case 14:case"end":return a.stop()}},r,null,[[2,9]])}));return function(s){return i.apply(this,arguments)}}(),Ee=function(){var i=C()(g()().mark(function r(){return g()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,k.request)("".concat(L,"/api/v1/documents/").concat(v,"/risks/analyze"),{method:"POST",data:{top_k:1}});case 3:return n.abrupt("return",n.sent);case 6:return n.prev=6,n.t0=n.catch(0),console.error("Trigger analysis error:",n.t0),n.abrupt("return",null);case 10:case"end":return n.stop()}},r,null,[[0,6]])}));return function(){return i.apply(this,arguments)}}(),cn=function(){var i=C()(g()().mark(function r(){var s,n,t,a,u,f,c,w,Z,R,V;return g()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,Promise.all([ln(),un()]);case 2:if(s=j.sent,n=b()(s,2),t=n[0],a=n[1],!(a&&a.status==="success")){j.next=17;break}if(f=Ge(a,(u=t==null?void 0:t.raw_content)!==null&&u!==void 0?u:y),K(f),!(a.risks&&a.risks.length>0)){j.next=15;break}return w=(c=a.risks.find(function(se){return se.identifier==="0"}))!==null&&c!==void 0?c:a.risks[0],j.next=13,je(w.identifier);case 13:Z=j.sent,Z&&(Fe(Z),R="risk-".concat(w.identifier),X(R),V=document.getElementById(R),V&&V.scrollIntoView({behavior:"smooth",block:"center"}));case 15:j.next=18;break;case 17:B.ZP.error("\u83B7\u53D6\u5206\u6790\u7ED3\u679C\u5931\u8D25");case 18:o(!1);case 19:case"end":return j.stop()}},r)}));return function(){return i.apply(this,arguments)}}(),on=function i(){W.current&&clearTimeout(W.current),W.current=setTimeout(C()(g()().mark(function r(){var s;return g()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,an();case 2:if(s=t.sent,s){t.next=6;break}return i(),t.abrupt("return");case 6:if(s.status!=="success"){t.next=13;break}return T("success"),B.ZP.success("\u5206\u6790\u5B8C\u6210\uFF01"),t.next=11,cn();case 11:t.next=14;break;case 13:s.status==="failed"?(T("failed"),o(!1),B.ZP.error(s.error||"\u5206\u6790\u5931\u8D25")):i();case 14:case"end":return t.stop()}},r)})),2e3)},Ce=function(){var i=C()(g()().mark(function r(){var s;return g()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return T("analyzing"),t.next=3,Ee();case 3:if(s=t.sent,s){t.next=11;break}return console.log("First analysis trigger failed, retrying in 1s..."),t.next=8,new Promise(function(a){setTimeout(a,1e3)});case 8:return t.next=10,Ee();case 10:s=t.sent;case 11:s&&s.status==="analyzing"?(B.ZP.info("\u5F00\u59CB\u667A\u80FD\u5206\u6790..."),on()):(T("failed"),o(!1),B.ZP.error("\u89E6\u53D1\u5206\u6790\u5931\u8D25\uFF0C\u53EF\u80FD\u662F\u6587\u6863\u5C1A\u672A\u51C6\u5907\u597D\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5"));case 12:case"end":return t.stop()}},r)}));return function(){return i.apply(this,arguments)}}(),dn=function(){var i=C()(g()().mark(function r(){return g()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o(!0),n.next=3,Ce();case 3:case"end":return n.stop()}},r)}));return function(){return i.apply(this,arguments)}}();(0,x.useEffect)(function(){if(!v){B.ZP.error("\u7F3A\u5C11\u6587\u4EF6ID\uFF0C\u8BF7\u91CD\u65B0\u4E0A\u4F20"),k.history.push("/");return}return dn(),function(){W.current&&clearTimeout(W.current)}},[v]);var fn=function(){var i=C()(g()().mark(function r(){return g()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(v){n.next=2;break}return n.abrupt("return");case 2:return o(!0),n.next=5,Ce();case 5:case"end":return n.stop()}},r)}));return function(){return i.apply(this,arguments)}}(),vn=function(){k.history.push("/")},gn=function(r){te("risk"),ne(r),q(!0)},hn=function(r){te("suggestion"),ne(r),q(!0)},mn=function(r){te("legal"),ne(r),q(!0)},pn=function(r,s){if(r==="risk"){var n=l==null?void 0:l.risks.find(function(u){return u.id===s});n&&(X(s),je(n.identifier).then(function(u){u&&Fe(u)}),gn(n))}else if(r==="suggestion"){X(s);var t=l==null?void 0:l.suggestions.find(function(u){return u.id===s});t&&hn(t)}else if(r==="legal"){X(s);var a=l==null?void 0:l.legalBasis.find(function(u){return u.id===s});a&&mn(a)}},xn=function(){if(!l||!l.contractText)return y?(0,e.jsx)("pre",{className:"whitespace-pre-wrap",children:y}):(0,e.jsx)("div",{className:"text-gray-400 text-center py-10",children:"\u6682\u65E0\u5408\u540C\u6587\u672C\u5185\u5BB9"});var r=l.contractText,s=l.risks,n=l.suggestions,t=l.legalBasis,a=[];s.forEach(function(c){a.push({range:c.highlightRange,type:"risk",id:c.id,riskLevel:c.level})}),n.forEach(function(c){a.push({range:c.highlightRange,type:"suggestion",id:c.id})}),t.forEach(function(c){a.push({range:c.relatedRange,type:"legal",id:c.id})}),a.sort(function(c,w){return c.range.start-w.range.start});var u=[],f=0;return a.forEach(function(c,w){c.range.start<f||c.range.end>r.length||(c.range.start>f&&u.push((0,e.jsx)("span",{children:r.substring(f,c.range.start)},"text-".concat(w))),u.push((0,e.jsx)("mark",{className:"highlight ".concat(c.type," ").concat(c.type==="risk"&&c.riskLevel?"risk-".concat(c.riskLevel):""," ").concat(Ye===c.id?"active":""),id:c.id,onClick:function(){return pn(c.type,c.id)},children:r.substring(c.range.start,c.range.end)},"highlight-".concat(c.id))),f=c.range.end)}),f<r.length&&u.push((0,e.jsx)("span",{children:r.substring(f)},"text-end")),u},Be=function(){return(l==null?void 0:l.contractText)||y||""},bn=function(){if(!l)return[];var r=l.risks,s=l.suggestions,n=l.legalBasis,t=[];return r.forEach(function(a){t.push({range:a.highlightRange,type:"risk",id:a.id})}),s.forEach(function(a){t.push({range:a.highlightRange,type:"suggestion",id:a.id})}),n.forEach(function(a){t.push({range:a.relatedRange,type:"legal",id:a.id})}),t.sort(function(a,u){return a.range.start-u.range.start}),t},yn=function(){var r,s,n,t=new Date,a=Be(),u=new Set(pe),f=u.has("contract"),c=u.has("risks"),w=u.has("suggestions"),Z=u.has("legal"),R="\u5408\u540C\u5206\u6790\u7ED3\u679C\uFF08\u5BFC\u51FA\uFF09",V="\u5BFC\u51FA\u65F6\u95F4\uFF1A".concat(oe(t)).concat(v?" \xB7 \u6587\u4EF6ID\uFF1A".concat(h(v)):""),Ae=c?((r=l==null?void 0:l.risks)!==null&&r!==void 0?r:[]).map(function(p){var Bn=p.level==="high"?"\u9AD8\u98CE\u9669":p.level==="medium"?"\u4E2D\u98CE\u9669":"\u4F4E\u98CE\u9669";return`
              <div class="item">
                <div class="item-title">
                  <span class="badge `.concat(h(p.level),'">').concat(Bn,`</span>
                  <span class="item-head">`).concat(h(p.title),`</span>
                </div>
                <div class="item-body">`).concat(h(p.content),`</div>
                `).concat(p.suggestion?'<div class="item-sub"><span class="muted">\u5EFA\u8BAE\uFF1A</span>'.concat(h(p.suggestion),"</div>"):"",`
              </div>
            `)}).join(""):"",j=w?((s=l==null?void 0:l.suggestions)!==null&&s!==void 0?s:[]).map(function(p){return`
              <div class="item">
                <div class="item-title">
                  <span class="badge info">\u4FEE\u6539\u5EFA\u8BAE</span>
                  <span class="item-head">`.concat(h(p.reason||"\u5EFA\u8BAE"),`</span>
                </div>
                <div class="diff">
                  <div class="diff-row">
                    <div class="diff-label">\u539F\u6587</div>
                    <div class="diff-content original">`).concat(h(p.original),`</div>
                  </div>
                  <div class="diff-row">
                    <div class="diff-label">\u4FEE\u6539\u4E3A</div>
                    <div class="diff-content revised">`).concat(h(p.revised),`</div>
                  </div>
                </div>
              </div>
            `)}).join(""):"",se=Z?((n=l==null?void 0:l.legalBasis)!==null&&n!==void 0?n:[]).map(function(p){return`
              <div class="item">
                <div class="item-title">
                  <span class="badge legal">\u6CD5\u5F8B\u4F9D\u636E</span>
                  <span class="item-head">`.concat(h(p.lawName)," ").concat(h(p.article),`</span>
                </div>
                <div class="item-body">`).concat(h(p.content),`</div>
                <div class="item-sub"><span class="muted">\u76F8\u5173\u5EA6\uFF1A</span>`).concat((p.score*100).toFixed(0),`%</div>
              </div>
            `)}).join(""):"",Cn=f?be&&l?'<div class="contract-text"><div class="contract-pre">'.concat($e(a,bn()).replace(/\n/g,"<br/>"),"</div></div>"):'<div class="contract-text"><div class="contract-pre">'.concat(h(a).replace(/\n/g,"<br/>"),"</div></div>"):"";return`
<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>`.concat(h(R),`</title>
    <style>
      @page { margin: 16mm 14mm; }
      body {
        font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", Arial, sans-serif;
        color: #111827;
        line-height: 1.55;
      }
      .header { margin-bottom: 14px; }
      .title { font-size: 18px; font-weight: 700; margin: 0 0 4px 0; }
      .subtitle { font-size: 12px; color: #6b7280; margin: 0; }
      .section { margin-top: 14px; }
      .section-title { font-size: 13px; font-weight: 700; margin: 0 0 8px 0; }
      .divider { height: 1px; background: #e5e7eb; margin: 10px 0; }
      .item { border: 1px solid #e5e7eb; border-radius: 8px; padding: 10px 12px; margin: 10px 0; break-inside: avoid; }
      .item-title { display: flex; align-items: center; gap: 8px; margin-bottom: 6px; }
      .item-head { font-weight: 700; }
      .item-body { font-size: 12px; color: #111827; }
      .item-sub { font-size: 12px; color: #374151; margin-top: 6px; }
      .muted { color: #6b7280; }
      .badge { display: inline-block; font-size: 11px; padding: 2px 8px; border-radius: 999px; border: 1px solid #e5e7eb; background: #f9fafb; color: #111827; }
      .badge.high { background: #fff1f2; border-color: #fecdd3; color: #9f1239; }
      .badge.medium { background: #fff7ed; border-color: #fed7aa; color: #9a3412; }
      .badge.low { background: #f0fdf4; border-color: #bbf7d0; color: #166534; }
      .badge.info { background: #eff6ff; border-color: #bfdbfe; color: #1d4ed8; }
      .badge.legal { background: #f5f3ff; border-color: #ddd6fe; color: #5b21b6; }
      .diff { margin-top: 6px; }
      .diff-row { display: flex; gap: 10px; margin-top: 6px; }
      .diff-label { width: 52px; font-size: 12px; color: #6b7280; flex: 0 0 auto; }
      .diff-content { font-size: 12px; padding: 8px 10px; border-radius: 6px; border: 1px solid #e5e7eb; width: 100%; }
      .diff-content.original { background: #fff1f2; border-color: #fecdd3; }
      .diff-content.revised { background: #f0fdf4; border-color: #bbf7d0; }
      .contract-text { margin-top: 8px; }
      .contract-pre { font-size: 12px; white-space: normal; word-break: break-word; }
      mark.hl { padding: 0 2px; border-radius: 3px; }
      mark.hl.risk { background: #ffe4e6; }
      mark.hl.suggestion { background: #dbeafe; }
      mark.hl.legal { background: #ede9fe; }
      .print-hint { font-size: 12px; color: #6b7280; margin-top: 10px; }
      .footer { position: fixed; bottom: 0; left: 0; right: 0; font-size: 10px; color: #9ca3af; }
      .footer-inner { display: flex; justify-content: space-between; }
      @media print {
        .no-print { display: none !important; }
      }
    </style>
  </head>
  <body>
    <div class="header">
      <div class="title">`).concat(h(R),`</div>
      <p class="subtitle">`).concat(V,`</p>
      <div class="print-hint no-print">\u63D0\u793A\uFF1A\u5728\u6253\u5370\u5BF9\u8BDD\u6846\u4E2D\u9009\u62E9\u201C\u4FDD\u5B58\u4E3A PDF\u201D\u5373\u53EF\u5BFC\u51FA\u3002</div>
      <div class="divider"></div>
    </div>

    `).concat(c?'<div class="section"><div class="section-title">\u98CE\u9669\u6458\u8981</div>'.concat(Ae||'<div class="muted">\u6682\u65E0\u98CE\u9669</div>',"</div>"):"",`
    `).concat(w?'<div class="section"><div class="section-title">\u4FEE\u6539\u5EFA\u8BAE</div>'.concat(j||'<div class="muted">\u6682\u65E0\u4FEE\u6539\u5EFA\u8BAE</div>',"</div>"):"",`
    `).concat(Z?'<div class="section"><div class="section-title">\u6CD5\u5F8B\u4F9D\u636E</div>'.concat(se||'<div class="muted">\u6682\u65E0\u6CD5\u5F8B\u4F9D\u636E</div>',"</div>"):"",`
    `).concat(f?'<div class="section"><div class="section-title">\u5408\u540C\u6B63\u6587</div>'.concat(Cn||'<div class="muted">\u6682\u65E0\u6B63\u6587</div>',"</div>"):"",`

    <div class="footer">
      <div class="footer-inner">
        <span>LegalRag</span>
        <span>`).concat(oe(t),`</span>
      </div>
    </div>
    <script>
      // \u5C3D\u91CF\u81EA\u52A8\u89E6\u53D1\u6253\u5370\uFF08\u7528\u6237\u4ECD\u53EF\u53D6\u6D88\uFF09
      window.addEventListener('load', () => {
        setTimeout(() => window.print(), 250);
      });
    <\/script>
  </body>
</html>
    `).trim()},Fn=function(){var r,s=Be();if(!s){B.ZP.error("\u6682\u65E0\u53EF\u5BFC\u51FA\u7684\u5408\u540C\u6587\u672C");return}var n=yn(),t=document.createElement("iframe");t.style.position="fixed",t.style.right="0",t.style.bottom="0",t.style.width="0",t.style.height="0",t.style.border="none",document.body.appendChild(t);var a=t.contentDocument||((r=t.contentWindow)===null||r===void 0?void 0:r.document);if(!a){B.ZP.error("\u65E0\u6CD5\u521B\u5EFA\u6253\u5370\u6587\u6863"),document.body.removeChild(t);return}a.open(),a.write(n),a.close(),t.onload=function(){setTimeout(function(){try{var u,f;(u=t.contentWindow)===null||u===void 0||u.focus(),(f=t.contentWindow)===null||f===void 0||f.print()}catch(c){console.error("Print error:",c),B.ZP.error("\u6253\u5370\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5")}setTimeout(function(){document.body.removeChild(t)},1e3)},100)},setTimeout(function(){if(document.body.contains(t)){try{var u,f;(u=t.contentWindow)===null||u===void 0||u.focus(),(f=t.contentWindow)===null||f===void 0||f.print()}catch(c){}setTimeout(function(){document.body.contains(t)&&document.body.removeChild(t)},1e3)}},500)},jn=function(){if(!_)return null;if(O==="risk"){var r,s=_,n=(r=s.legalBasis)!==null&&r!==void 0?r:[],t=n.length>0;return(0,e.jsxs)("div",{className:"detail-modal",children:[(0,e.jsxs)("div",{className:"modal-section",children:[(0,e.jsx)("div",{className:"section-label",children:"\u98CE\u9669\u7B49\u7EA7"}),(0,e.jsx)(ie.Z,{color:s.level==="high"?"red":s.level==="medium"?"orange":"green",children:s.level==="high"?"\u9AD8\u98CE\u9669":s.level==="medium"?"\u4E2D\u98CE\u9669":"\u4F4E\u98CE\u9669"})]}),(0,e.jsxs)("div",{className:"modal-section",children:[(0,e.jsx)("div",{className:"section-label",children:"\u98CE\u9669\u63CF\u8FF0"}),(0,e.jsx)("div",{className:"section-content",children:s.content})]}),s.suggestion&&(0,e.jsxs)("div",{className:"modal-section",children:[(0,e.jsx)("div",{className:"section-label",children:"\u5EFA\u8BAE\u63AA\u65BD"}),(0,e.jsx)("div",{className:"section-content",children:s.suggestion})]}),t&&(0,e.jsxs)("div",{className:"modal-section",children:[(0,e.jsx)("div",{className:"section-label",children:"\u76F8\u5173\u6CD5\u5F8B\u4F9D\u636E"}),(0,e.jsx)("div",{className:"section-content",children:n.map(function(f){return(0,e.jsxs)("div",{style:{marginBottom:8},children:[(0,e.jsxs)("div",{style:{fontWeight:600},children:[f.lawName," ",f.article]}),(0,e.jsx)("div",{style:{margin:"6px 0",fontSize:12,color:"#666"},children:f.content}),(0,e.jsxs)("div",{className:"legal-score",children:[(0,e.jsx)(ee.Z,{disabled:!0,allowHalf:!0,value:f.score*5,style:{fontSize:12}}),(0,e.jsxs)("span",{style:{marginLeft:8,fontSize:12},children:["\u76F8\u5173\u5EA6: ",(f.score*100).toFixed(0),"%"]})]})]},f.id)})})]})]})}if(O==="suggestion"){var a=_;return(0,e.jsxs)("div",{className:"detail-modal",children:[(0,e.jsxs)("div",{className:"diff-display",children:[(0,e.jsxs)("div",{className:"diff-row",children:[(0,e.jsx)("div",{className:"diff-label",children:"\u539F\u6587"}),(0,e.jsx)("div",{className:"diff-content original",children:a.original})]}),(0,e.jsxs)("div",{className:"diff-row",children:[(0,e.jsx)("div",{className:"diff-label",children:"\u4FEE\u6539\u4E3A"}),(0,e.jsx)("div",{className:"diff-content revised",children:a.revised})]})]}),a.reason&&(0,e.jsxs)("div",{className:"modal-section",children:[(0,e.jsx)("div",{className:"section-label",children:"\u4FEE\u6539\u7406\u7531"}),(0,e.jsx)("div",{className:"section-content",children:a.reason})]})]})}if(O==="legal"){var u=_;return(0,e.jsxs)("div",{className:"detail-modal",children:[(0,e.jsxs)("div",{className:"modal-section",children:[(0,e.jsx)("div",{className:"section-label",children:"\u6CD5\u5F8B\u540D\u79F0"}),(0,e.jsx)("div",{className:"section-content",children:u.lawName})]}),(0,e.jsxs)("div",{className:"modal-section",children:[(0,e.jsx)("div",{className:"section-label",children:"\u6761\u6B3E"}),(0,e.jsx)("div",{className:"section-content",children:u.article})]}),(0,e.jsxs)("div",{className:"modal-section",children:[(0,e.jsx)("div",{className:"section-label",children:"\u6CD5\u6761\u5185\u5BB9"}),(0,e.jsx)("div",{className:"section-content",children:u.content})]}),(0,e.jsxs)("div",{className:"modal-section",children:[(0,e.jsx)("div",{className:"section-label",children:"\u76F8\u5173\u5EA6\u8BC4\u5206"}),(0,e.jsxs)("div",{className:"legal-score",children:[(0,e.jsx)(ee.Z,{disabled:!0,allowHalf:!0,value:u.score*5}),(0,e.jsxs)("span",{style:{marginLeft:8},children:[(u.score*100).toFixed(0),"%"]})]})]}),u.explanation&&(0,e.jsxs)("div",{className:"modal-section",children:[(0,e.jsx)("div",{className:"section-label",children:"\u9002\u7528\u8BF4\u660E"}),(0,e.jsx)("div",{className:"section-content",children:u.explanation})]})]})}},En=function(){return O==="risk"?"\u98CE\u9669\u8BE6\u60C5":O==="suggestion"?"\u4FEE\u6539\u5EFA\u8BAE\u8BE6\u60C5":"\u6CD5\u5F8B\u4F9D\u636E\u8BE6\u60C5"};return S?(0,e.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white flex items-center justify-center px-4",children:(0,e.jsxs)("div",{className:"w-full max-w-md rounded-2xl bg-white border border-slate-100 shadow-xl px-8 py-10 text-center space-y-4",children:[(0,e.jsx)("div",{className:"bg-gradient-to-r from-brand-600 to-blue-500 inline-flex items-center justify-center rounded-full px-4 py-1 text-xs font-medium text-white",children:$==="analyzing"?"\u5408\u540C\u667A\u80FD\u5206\u6790\u8FDB\u884C\u4E2D\u2026":"\u6B63\u5728\u51C6\u5907\u5206\u6790..."}),(0,e.jsx)("p",{className:"text-sm text-slate-500",children:"\u6211\u4EEC\u6B63\u5728\u4E3A\u60A8\u89E3\u6790\u5408\u540C\u6761\u6B3E\u5E76\u751F\u6210\u98CE\u9669\u63D0\u793A\u3001\u4FEE\u6539\u610F\u89C1\u4E0E\u6CD5\u5F8B\u4F9D\u636E\uFF0C\u8BF7\u7A0D\u5019\u3002"}),(0,e.jsx)("div",{className:"flex justify-center pt-2",children:(0,e.jsx)(Ze.Z,{size:"large",tip:$==="analyzing"?"\u6B63\u5728\u5206\u6790\u5408\u540C...":"\u6B63\u5728\u52A0\u8F7D..."})})]})}):(0,e.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white px-4 py-6",children:(0,e.jsxs)("div",{className:"mx-auto max-w-6xl rounded-2xl bg-white border border-slate-100 shadow-xl overflow-hidden",children:[(0,e.jsxs)("div",{className:"bg-gradient-to-r from-brand-600 to-blue-500 px-6 py-4 flex items-center justify-between",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-xs font-semibold tracking-wide text-brand-50/80 uppercase",children:"LegalRag"}),(0,e.jsx)("p",{className:"text-sm text-brand-50",children:"\u5408\u540C\u5206\u6790\u7ED3\u679C"})]}),(0,e.jsx)("span",{className:"rounded-full border border-white/30 bg-white/10 px-3 py-1 text-xs text-brand-50",children:"\u98CE\u9669\u63D0\u793A \xB7 \u4FEE\u6539\u610F\u89C1 \xB7 \u6CD5\u5F8B\u4F9D\u636E"})]}),(0,e.jsx)("div",{className:"contract-analysis px-4 pb-4 pt-2",children:(0,e.jsxs)(Te._z,{header:{title:"\u5408\u540C\u5206\u6790\u7ED3\u679C",onBack:vn,extra:[(0,e.jsx)(le.ZP,{type:"default",style:{background:"#ffffff",borderColor:"#d9d9d9",color:"#1677ff",fontWeight:600},onClick:function(){return re(!0)},children:"\u5BFC\u51FA PDF"},"exportPdf"),(0,e.jsx)(le.ZP,{onClick:fn,children:"\u91CD\u65B0\u5206\u6790"},"reanalyze")]},children:[l&&(0,e.jsx)("div",{className:"analysis-content",children:(0,e.jsxs)(He.Z,{gutter:24,children:[(0,e.jsx)(ue.Z,{span:12,children:(0,e.jsx)(I.Z,{title:"\u5408\u540C\u6587\u672C",bordered:!1,children:(0,e.jsx)("div",{className:"contract-text-panel",ref:sn,children:xn()})})}),(0,e.jsx)(ue.Z,{span:12,children:(0,e.jsx)("div",{className:"analysis-panel",children:(0,e.jsx)(I.Z,{title:"\u98CE\u9669\u8BE6\u60C5",bordered:!1,style:{marginBottom:16},bodyStyle:{padding:"20px"},children:E?(0,e.jsxs)("div",{className:"detail-container",children:[(0,e.jsxs)("div",{className:"modal-section",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},children:[(0,e.jsx)("span",{style:{fontSize:16,fontWeight:600},children:"\u98CE\u9669\u7B49\u7EA7"}),(0,e.jsx)(ie.Z,{color:E.level==="high"?"#f5222d":E.level==="medium"?"#fa8c16":"#52c41a",style:{padding:"4px 16px",fontSize:14,borderRadius:12,marginRight:0},children:E.level==="high"?"\u9AD8\u98CE\u9669":E.level==="medium"?"\u4E2D\u98CE\u9669":"\u4F4E\u98CE\u9669"})]}),(0,e.jsx)(I.Z,{type:"inner",title:(0,e.jsx)("span",{style:{color:"#cf1322"},children:"\u{1F6A8} \u98CE\u9669\u63CF\u8FF0"}),size:"small",style:{marginBottom:16,backgroundColor:"#fff1f0",borderColor:"#ffa39e"},children:(0,e.jsx)("div",{style:{lineHeight:"1.6",color:"#333"},children:E.detected_issue})}),E.suggestions&&(0,e.jsx)(I.Z,{type:"inner",title:(0,e.jsx)("span",{style:{color:"#d48806"},children:"\u{1F4A1} \u5EFA\u8BAE\u63AA\u65BD"}),size:"small",style:{marginBottom:16,backgroundColor:"#feffe6",borderColor:"#fffb8f"},children:(0,e.jsx)("div",{style:{lineHeight:"1.6",color:"#333"},children:E.suggestions})}),E.legal_basis&&E.legal_basis.length>0&&(0,e.jsxs)("div",{className:"modal-section",children:[(0,e.jsx)("div",{className:"section-title",style:{fontSize:15,fontWeight:600,marginBottom:12,marginTop:24},children:"\u2696\uFE0F \u76F8\u5173\u6CD5\u5F8B\u4F9D\u636E"}),(0,e.jsx)("div",{className:"section-content",children:E.legal_basis.map(function(i,r){return(0,e.jsxs)(I.Z,{size:"small",hoverable:!0,className:"legal-card",style:{marginBottom:12,borderRadius:6,borderLeft:"4px solid #1890ff"},children:[(0,e.jsxs)("div",{style:{fontWeight:600,color:"#262626",marginBottom:4},children:[i.law_name," ",i.order]}),(0,e.jsx)("div",{style:{fontSize:13,color:"#666",marginBottom:8,lineHeight:"1.5"},children:i.content}),(0,e.jsxs)("div",{className:"legal-score",style:{display:"flex",alignItems:"center"},children:[(0,e.jsx)(ee.Z,{disabled:!0,allowHalf:!0,value:(i.relevance_score||0)*5,style:{fontSize:12}}),(0,e.jsxs)("span",{style:{marginLeft:8,fontSize:12,color:"#8c8c8c"},children:["\u76F8\u5173\u5EA6:"," ",((i.relevance_score||0)*100).toFixed(0),"%"]})]})]},r)})})]})]}):(0,e.jsxs)("div",{className:"text-gray-400 text-center py-12",children:[(0,e.jsx)("div",{style:{fontSize:40,marginBottom:16},children:"\u{1F4CB}"}),(0,e.jsx)("div",{children:"\u6682\u65E0\u98CE\u9669\u8BE6\u60C5"}),(0,e.jsx)("div",{style:{fontSize:12,marginTop:8},children:"\u70B9\u51FB\u5DE6\u4FA7\u5408\u540C\u5185\u5BB9\u7684\u6807\u8BB0\u5904\u67E5\u770B"})]})})})})]})}),(0,e.jsx)(ce.Z,{title:En(),open:Je,onCancel:function(){return q(!1)},footer:null,width:700,children:jn()}),(0,e.jsxs)(ce.Z,{title:"\u5BFC\u51FA PDF",open:qe,onCancel:function(){return re(!1)},okText:"\u5F00\u59CB\u5BFC\u51FA",cancelText:"\u53D6\u6D88",okButtonProps:{style:{backgroundColor:"#fff",color:"#1677ff",border:"1px solid #d9d9d9"}},onOk:function(){re(!1),Fn()},children:[(0,e.jsx)(Re.Z.Paragraph,{style:{marginBottom:10,color:"#6b7280"},children:'\u70B9\u51FB"\u5F00\u59CB\u5BFC\u51FA"\u540E\u5C06\u81EA\u52A8\u5F39\u51FA\u6253\u5370\u5BF9\u8BDD\u6846\uFF0C\u5728\u5BF9\u8BDD\u6846\u4E2D\u9009\u62E9"\u4FDD\u5B58\u4E3A PDF"\u5373\u53EF\u5BFC\u51FA\u3002'}),(0,e.jsx)(Ie.Z,{style:{margin:"12px 0"}}),(0,e.jsxs)("div",{style:{marginBottom:12},children:[(0,e.jsx)("div",{style:{fontWeight:600,marginBottom:8},children:"\u5BFC\u51FA\u5185\u5BB9"}),(0,e.jsx)(M.Z.Group,{value:pe,onChange:function(r){var s=r;s.includes("contract")||s.push("contract"),en(Array.from(new Set(s)))},children:(0,e.jsxs)(Me.Z,{wrap:!0,children:[(0,e.jsx)(M.Z,{value:"contract",children:"\u5408\u540C\u6B63\u6587"}),(0,e.jsx)(M.Z,{value:"risks",children:"\u98CE\u9669\u6458\u8981"}),(0,e.jsx)(M.Z,{value:"suggestions",children:"\u4FEE\u6539\u5EFA\u8BAE"}),(0,e.jsx)(M.Z,{value:"legal",children:"\u6CD5\u5F8B\u4F9D\u636E"})]})})]}),(0,e.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10},children:[(0,e.jsx)("div",{style:{fontWeight:600},children:"\u6B63\u6587\u5305\u542B\u9AD8\u4EAE"}),(0,e.jsx)(Le.Z,{checked:be,onChange:tn}),(0,e.jsx)("span",{style:{color:"#6b7280",fontSize:12},children:"\u98CE\u9669/\u5EFA\u8BAE/\u6CD5\u6761\u4F1A\u4EE5\u4E0D\u540C\u5E95\u8272\u6807\u8BB0"})]})]})]})})]})})},We=Oe}}]);
