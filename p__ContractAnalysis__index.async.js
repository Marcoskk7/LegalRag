"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[519],{48214:function(kt,Ge,f){f.r(Ge),f.d(Ge,{default:function(){return Wt}});var at=f(90228),I=f.n(at),st=f(87999),Q=f.n(st),it=f(48305),X=f.n(it),lt=f(39321),ne=f(43953),ae=f(31707),o=f(75271),ot=f(82187),Y=f.n(ot),ct=f(18051),Ve=f(32218),ze=f(9943),ke=f(5856),dt=f(96074),oe=f(85968),z=f(90906),ut=f(84432),Xe=f(36234),Ue=f(83509),Ee=f(83437);const mt=e=>{const{paddingXXS:n,lineWidth:l,tagPaddingHorizontal:r,componentCls:s,calc:h}=e,x=h(r).sub(l).equal(),j=h(n).sub(l).equal();return{[s]:Object.assign(Object.assign({},(0,Xe.Wf)(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:x,fontSize:e.tagFontSize,lineHeight:e.tagLineHeight,whiteSpace:"nowrap",background:e.defaultBg,border:`${(0,z.bf)(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,opacity:1,transition:`all ${e.motionDurationMid}`,textAlign:"start",position:"relative",[`&${s}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:e.defaultColor},[`${s}-close-icon`]:{marginInlineStart:j,fontSize:e.tagIconSize,color:e.colorIcon,cursor:"pointer",transition:`all ${e.motionDurationMid}`,"&:hover":{color:e.colorTextHeading}},[`&${s}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${e.iconCls}-close, ${e.iconCls}-close:hover`]:{color:e.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${s}-checkable-checked):hover`]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},"&-hidden":{display:"none"},[`> ${e.iconCls} + span, > span + ${e.iconCls}`]:{marginInlineStart:x}}),[`${s}-borderless`]:{borderColor:"transparent",background:e.tagBorderlessBg}}},Pe=e=>{const{lineWidth:n,fontSizeIcon:l,calc:r}=e,s=e.fontSizeSM;return(0,Ue.IX)(e,{tagFontSize:s,tagLineHeight:(0,z.bf)(r(e.lineHeightSM).mul(s).equal()),tagIconSize:r(l).sub(r(n).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:e.defaultBg})},Fe=e=>({defaultBg:new ut.t(e.colorFillQuaternary).onBackground(e.colorBgContainer).toHexString(),defaultColor:e.colorText});var Je=(0,Ee.I$)("Tag",e=>{const n=Pe(e);return mt(n)},Fe),ft=function(e,n){var l={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(l[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)n.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(l[r[s]]=e[r[s]]);return l},gt=o.forwardRef((e,n)=>{const{prefixCls:l,style:r,className:s,checked:h,children:x,icon:j,onChange:c,onClick:S}=e,B=ft(e,["prefixCls","style","className","checked","children","icon","onChange","onClick"]),{getPrefixCls:P,tag:v}=o.useContext(oe.E_),O=y=>{c==null||c(!h),S==null||S(y)},$=P("tag",l),[u,A,R]=Je($),F=Y()($,`${$}-checkable`,{[`${$}-checkable-checked`]:h},v==null?void 0:v.className,s,A,R);return u(o.createElement("span",Object.assign({},B,{ref:n,style:Object.assign(Object.assign({},r),v==null?void 0:v.style),className:F,onClick:O}),j,o.createElement("span",null,x)))}),ht=f(66291);const vt=e=>(0,ht.Z)(e,(n,{textColor:l,lightBorderColor:r,lightColor:s,darkColor:h})=>({[`${e.componentCls}${e.componentCls}-${n}`]:{color:l,background:s,borderColor:r,"&-inverse":{color:e.colorTextLightSolid,background:h,borderColor:h},[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}));var pt=(0,Ee.bk)(["Tag","preset"],e=>{const n=Pe(e);return vt(n)},Fe);function xt(e){return typeof e!="string"?e:e.charAt(0).toUpperCase()+e.slice(1)}const Be=(e,n,l)=>{const r=xt(l);return{[`${e.componentCls}${e.componentCls}-${n}`]:{color:e[`color${l}`],background:e[`color${r}Bg`],borderColor:e[`color${r}Border`],[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}};var yt=(0,Ee.bk)(["Tag","status"],e=>{const n=Pe(e);return[Be(n,"success","Success"),Be(n,"processing","Info"),Be(n,"error","Error"),Be(n,"warning","Warning")]},Fe),Ct=function(e,n){var l={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(l[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)n.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(l[r[s]]=e[r[s]]);return l};const Ke=o.forwardRef((e,n)=>{const{prefixCls:l,className:r,rootClassName:s,style:h,children:x,icon:j,color:c,onClose:S,bordered:B=!0,visible:P}=e,v=Ct(e,["prefixCls","className","rootClassName","style","children","icon","color","onClose","bordered","visible"]),{getPrefixCls:O,direction:$,tag:u}=o.useContext(oe.E_),[A,R]=o.useState(!0),F=(0,ct.Z)(v,["closeIcon","closable"]);o.useEffect(()=>{P!==void 0&&R(P)},[P]);const y=(0,Ve.o2)(c),T=(0,Ve.yT)(c),U=y||T,V=Object.assign(Object.assign({backgroundColor:c&&!U?c:void 0},u==null?void 0:u.style),h),C=O("tag",l),[N,Z,de]=Je(C),pe=Y()(C,u==null?void 0:u.className,{[`${C}-${c}`]:U,[`${C}-has-color`]:c&&!U,[`${C}-hidden`]:!A,[`${C}-rtl`]:$==="rtl",[`${C}-borderless`]:!B},r,s,Z,de),_=K=>{K.stopPropagation(),S==null||S(K),!K.defaultPrevented&&R(!1)},[,xe]=(0,ze.b)((0,ze.w)(e),(0,ze.w)(u),{closable:!1,closeIconRender:K=>{const ee=o.createElement("span",{className:`${C}-close-icon`,onClick:_},K);return(0,ke.wm)(K,ee,W=>({onClick:me=>{var E;(E=W==null?void 0:W.onClick)===null||E===void 0||E.call(W,me),_(me)},className:Y()(W==null?void 0:W.className,`${C}-close-icon`)}))}}),ue=typeof v.onClick=="function"||x&&x.type==="a",J=j||null,se=J?o.createElement(o.Fragment,null,J,x&&o.createElement("span",null,x)):x,ie=o.createElement("span",Object.assign({},F,{ref:n,className:pe,style:V}),se,xe,y&&o.createElement(pt,{key:"preset",prefixCls:C}),T&&o.createElement(yt,{key:"status",prefixCls:C}));return N(ue?o.createElement(dt.Z,{component:"Tag"},ie):ie)});Ke.CheckableTag=gt;var Te=Ke,Qe=f(74139),Ye=f(45011),bt=f(9233),$t=f(91235),qe=f(80940),he=f(15572),_e=f(47844),St=f(4238),et=f(57461),jt=f(83261),Nt=f(49234),Et=f(25583),Bt=f(31906),wt=f(49534);const Oe=o.createContext({}),Jt=Oe.Consumer;var It=f(3752),tt=function(e,n){var l={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(l[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)n.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(l[r[s]]=e[r[s]]);return l};const zt=e=>{var{prefixCls:n,className:l,avatar:r,title:s,description:h}=e,x=tt(e,["prefixCls","className","avatar","title","description"]);const{getPrefixCls:j}=(0,o.useContext)(oe.E_),c=j("list",n),S=Y()(`${c}-item-meta`,l),B=o.createElement("div",{className:`${c}-item-meta-content`},s&&o.createElement("h4",{className:`${c}-item-meta-title`},s),h&&o.createElement("div",{className:`${c}-item-meta-description`},h));return o.createElement("div",Object.assign({},x,{className:S}),r&&o.createElement("div",{className:`${c}-item-meta-avatar`},r),(s||h)&&B)},nt=o.forwardRef((e,n)=>{const{prefixCls:l,children:r,actions:s,extra:h,styles:x,className:j,classNames:c,colStyle:S}=e,B=tt(e,["prefixCls","children","actions","extra","styles","className","classNames","colStyle"]),{grid:P,itemLayout:v}=(0,o.useContext)(Oe),{getPrefixCls:O,list:$}=(0,o.useContext)(oe.E_),u=C=>{var N,Z;return Y()((Z=(N=$==null?void 0:$.item)===null||N===void 0?void 0:N.classNames)===null||Z===void 0?void 0:Z[C],c==null?void 0:c[C])},A=C=>{var N,Z;return Object.assign(Object.assign({},(Z=(N=$==null?void 0:$.item)===null||N===void 0?void 0:N.styles)===null||Z===void 0?void 0:Z[C]),x==null?void 0:x[C])},R=()=>{let C=!1;return o.Children.forEach(r,N=>{typeof N=="string"&&(C=!0)}),C&&o.Children.count(r)>1},F=()=>v==="vertical"?!!h:!R(),y=O("list",l),T=s&&s.length>0&&o.createElement("ul",{className:Y()(`${y}-item-action`,u("actions")),key:"actions",style:A("actions")},s.map((C,N)=>o.createElement("li",{key:`${y}-item-action-${N}`},C,N!==s.length-1&&o.createElement("em",{className:`${y}-item-action-split`})))),U=P?"div":"li",V=o.createElement(U,Object.assign({},B,P?{}:{ref:n},{className:Y()(`${y}-item`,{[`${y}-item-no-flex`]:!F()},j)}),v==="vertical"&&h?[o.createElement("div",{className:`${y}-item-main`,key:"content"},r,T),o.createElement("div",{className:Y()(`${y}-item-extra`,u("extra")),key:"extra",style:A("extra")},h)]:[r,T,(0,ke.Tm)(h,{key:"extra"})]);return P?o.createElement(It.Z,{ref:n,flex:1,style:S},V):V});nt.Meta=zt;var Pt=nt;const Ft=e=>{const{listBorderedCls:n,componentCls:l,paddingLG:r,margin:s,itemPaddingSM:h,itemPaddingLG:x,marginLG:j,borderRadiusLG:c}=e,S=(0,z.bf)(e.calc(c).sub(e.lineWidth).equal());return{[n]:{border:`${(0,z.bf)(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:c,[`${l}-header`]:{borderRadius:`${S} ${S} 0 0`},[`${l}-footer`]:{borderRadius:`0 0 ${S} ${S}`},[`${l}-header,${l}-footer,${l}-item`]:{paddingInline:r},[`${l}-pagination`]:{margin:`${(0,z.bf)(s)} ${(0,z.bf)(j)}`}},[`${n}${l}-sm`]:{[`${l}-item,${l}-header,${l}-footer`]:{padding:h}},[`${n}${l}-lg`]:{[`${l}-item,${l}-header,${l}-footer`]:{padding:x}}}},Tt=e=>{const{componentCls:n,screenSM:l,screenMD:r,marginLG:s,marginSM:h,margin:x}=e;return{[`@media screen and (max-width:${r}px)`]:{[n]:{[`${n}-item`]:{[`${n}-item-action`]:{marginInlineStart:s}}},[`${n}-vertical`]:{[`${n}-item`]:{[`${n}-item-extra`]:{marginInlineStart:s}}}},[`@media screen and (max-width: ${l}px)`]:{[n]:{[`${n}-item`]:{flexWrap:"wrap",[`${n}-action`]:{marginInlineStart:h}}},[`${n}-vertical`]:{[`${n}-item`]:{flexWrap:"wrap-reverse",[`${n}-item-main`]:{minWidth:e.contentWidth},[`${n}-item-extra`]:{margin:`auto auto ${(0,z.bf)(x)}`}}}}}},Ot=e=>{const{componentCls:n,antCls:l,controlHeight:r,minHeight:s,paddingSM:h,marginLG:x,padding:j,itemPadding:c,colorPrimary:S,itemPaddingSM:B,itemPaddingLG:P,paddingXS:v,margin:O,colorText:$,colorTextDescription:u,motionDurationSlow:A,lineWidth:R,headerBg:F,footerBg:y,emptyTextPadding:T,metaMarginBottom:U,avatarMarginRight:V,titleMarginBottom:C,descriptionFontSize:N}=e;return{[n]:Object.assign(Object.assign({},(0,Xe.Wf)(e)),{position:"relative","--rc-virtual-list-scrollbar-bg":e.colorSplit,"*":{outline:"none"},[`${n}-header`]:{background:F},[`${n}-footer`]:{background:y},[`${n}-header, ${n}-footer`]:{paddingBlock:h},[`${n}-pagination`]:{marginBlockStart:x,[`${l}-pagination-options`]:{textAlign:"start"}},[`${n}-spin`]:{minHeight:s,textAlign:"center"},[`${n}-items`]:{margin:0,padding:0,listStyle:"none"},[`${n}-item`]:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:c,color:$,[`${n}-item-meta`]:{display:"flex",flex:1,alignItems:"flex-start",maxWidth:"100%",[`${n}-item-meta-avatar`]:{marginInlineEnd:V},[`${n}-item-meta-content`]:{flex:"1 0",width:0,color:$},[`${n}-item-meta-title`]:{margin:`0 0 ${(0,z.bf)(e.marginXXS)} 0`,color:$,fontSize:e.fontSize,lineHeight:e.lineHeight,"> a":{color:$,transition:`all ${A}`,"&:hover":{color:S}}},[`${n}-item-meta-description`]:{color:u,fontSize:N,lineHeight:e.lineHeight}},[`${n}-item-action`]:{flex:"0 0 auto",marginInlineStart:e.marginXXL,padding:0,fontSize:0,listStyle:"none","& > li":{position:"relative",display:"inline-block",padding:`0 ${(0,z.bf)(v)}`,color:u,fontSize:e.fontSize,lineHeight:e.lineHeight,textAlign:"center","&:first-child":{paddingInlineStart:0}},[`${n}-item-action-split`]:{position:"absolute",insetBlockStart:"50%",insetInlineEnd:0,width:R,height:e.calc(e.fontHeight).sub(e.calc(e.marginXXS).mul(2)).equal(),transform:"translateY(-50%)",backgroundColor:e.colorSplit}}},[`${n}-empty`]:{padding:`${(0,z.bf)(j)} 0`,color:u,fontSize:e.fontSizeSM,textAlign:"center"},[`${n}-empty-text`]:{padding:T,color:e.colorTextDisabled,fontSize:e.fontSize,textAlign:"center"},[`${n}-item-no-flex`]:{display:"block"}}),[`${n}-grid ${l}-col > ${n}-item`]:{display:"block",maxWidth:"100%",marginBlockEnd:O,paddingBlock:0,borderBlockEnd:"none"},[`${n}-vertical ${n}-item`]:{alignItems:"initial",[`${n}-item-main`]:{display:"block",flex:1},[`${n}-item-extra`]:{marginInlineStart:x},[`${n}-item-meta`]:{marginBlockEnd:U,[`${n}-item-meta-title`]:{marginBlockStart:0,marginBlockEnd:C,color:$,fontSize:e.fontSizeLG,lineHeight:e.lineHeightLG}},[`${n}-item-action`]:{marginBlockStart:j,marginInlineStart:"auto","> li":{padding:`0 ${(0,z.bf)(j)}`,"&:first-child":{paddingInlineStart:0}}}},[`${n}-split ${n}-item`]:{borderBlockEnd:`${(0,z.bf)(e.lineWidth)} ${e.lineType} ${e.colorSplit}`,"&:last-child":{borderBlockEnd:"none"}},[`${n}-split ${n}-header`]:{borderBlockEnd:`${(0,z.bf)(e.lineWidth)} ${e.lineType} ${e.colorSplit}`},[`${n}-split${n}-empty ${n}-footer`]:{borderTop:`${(0,z.bf)(e.lineWidth)} ${e.lineType} ${e.colorSplit}`},[`${n}-loading ${n}-spin-nested-loading`]:{minHeight:r},[`${n}-split${n}-something-after-last-item ${l}-spin-container > ${n}-items > ${n}-item:last-child`]:{borderBlockEnd:`${(0,z.bf)(e.lineWidth)} ${e.lineType} ${e.colorSplit}`},[`${n}-lg ${n}-item`]:{padding:P},[`${n}-sm ${n}-item`]:{padding:B},[`${n}:not(${n}-vertical)`]:{[`${n}-item-no-flex`]:{[`${n}-item-action`]:{float:"right"}}}}},At=e=>({contentWidth:220,itemPadding:`${(0,z.bf)(e.paddingContentVertical)} 0`,itemPaddingSM:`${(0,z.bf)(e.paddingContentVerticalSM)} ${(0,z.bf)(e.paddingContentHorizontal)}`,itemPaddingLG:`${(0,z.bf)(e.paddingContentVerticalLG)} ${(0,z.bf)(e.paddingContentHorizontalLG)}`,headerBg:"transparent",footerBg:"transparent",emptyTextPadding:e.padding,metaMarginBottom:e.padding,avatarMarginRight:e.padding,titleMarginBottom:e.paddingSM,descriptionFontSize:e.fontSize});var Mt=(0,Ee.I$)("List",e=>{const n=(0,Ue.IX)(e,{listBorderedCls:`${e.componentCls}-bordered`,minHeight:e.controlHeightLG});return[Ot(n),Ft(n),Tt(n)]},At),Lt=function(e,n){var l={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(l[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)n.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(l[r[s]]=e[r[s]]);return l};function Rt(e,n){const{pagination:l=!1,prefixCls:r,bordered:s=!1,split:h=!0,className:x,rootClassName:j,style:c,children:S,itemLayout:B,loadMore:P,grid:v,dataSource:O=[],size:$,header:u,footer:A,loading:R=!1,rowKey:F,renderItem:y,locale:T}=e,U=Lt(e,["pagination","prefixCls","bordered","split","className","rootClassName","style","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]),V=l&&typeof l=="object"?l:{},[C,N]=o.useState(V.defaultCurrent||1),[Z,de]=o.useState(V.defaultPageSize||10),{getPrefixCls:pe,direction:_,className:xe,style:ue}=(0,oe.dj)("list"),{renderEmpty:J}=o.useContext(oe.E_),se={current:1,total:0,position:"bottom"},ie=w=>(L,k)=>{var Ne;N(L),de(k),l&&((Ne=l==null?void 0:l[w])===null||Ne===void 0||Ne.call(l,L,k))},K=ie("onChange"),ee=ie("onShowSizeChange"),W=(w,L)=>{if(!y)return null;let k;return typeof F=="function"?k=F(w):F?k=w[F]:k=w.key,k||(k=`list-item-${L}`),o.createElement(o.Fragment,{key:k},y(w,L))},me=!!(P||l||A),E=pe("list",r),[D,ye,Ae]=Mt(E);let G=R;typeof G=="boolean"&&(G={spinning:G});const Ce=!!(G!=null&&G.spinning),Me=(0,Nt.Z)($);let fe="";switch(Me){case"large":fe="lg";break;case"small":fe="sm";break;default:break}const be=Y()(E,{[`${E}-vertical`]:B==="vertical",[`${E}-${fe}`]:fe,[`${E}-split`]:h,[`${E}-bordered`]:s,[`${E}-loading`]:Ce,[`${E}-grid`]:!!v,[`${E}-something-after-last-item`]:me,[`${E}-rtl`]:_==="rtl"},xe,x,j,ye,Ae),H=(0,St.Z)(se,{total:O.length,current:C,pageSize:Z},l||{}),Le=Math.ceil(H.total/H.pageSize);H.current=Math.min(H.current,Le);const $e=l&&o.createElement("div",{className:Y()(`${E}-pagination`)},o.createElement(wt.Z,Object.assign({align:"end"},H,{onChange:K,onShowSizeChange:ee})));let Se=(0,_e.Z)(O);l&&O.length>(H.current-1)*H.pageSize&&(Se=(0,_e.Z)(O).splice((H.current-1)*H.pageSize,H.pageSize));const Re=Object.keys(v||{}).some(w=>["xs","sm","md","lg","xl","xxl"].includes(w)),we=(0,Bt.Z)(Re),ge=o.useMemo(()=>{for(let w=0;w<et.c4.length;w+=1){const L=et.c4[w];if(we[L])return L}},[we]),De=o.useMemo(()=>{if(!v)return;const w=ge&&v[ge]?v[ge]:v.column;if(w)return{width:`${100/w}%`,maxWidth:`${100/w}%`}},[JSON.stringify(v),ge]);let je=Ce&&o.createElement("div",{style:{minHeight:53}});if(Se.length>0){const w=Se.map(W);je=v?o.createElement(Et.Z,{gutter:v.gutter},o.Children.map(w,L=>o.createElement("div",{key:L==null?void 0:L.key,style:De},L))):o.createElement("ul",{className:`${E}-items`},w)}else!S&&!Ce&&(je=o.createElement("div",{className:`${E}-empty-text`},(T==null?void 0:T.emptyText)||(J==null?void 0:J("List"))||o.createElement(jt.Z,{componentName:"List"})));const re=H.position,He=o.useMemo(()=>({grid:v,itemLayout:B}),[JSON.stringify(v),B]);return D(o.createElement(Oe.Provider,{value:He},o.createElement("div",Object.assign({ref:n,style:Object.assign(Object.assign({},ue),c),className:be},U),(re==="top"||re==="both")&&$e,u&&o.createElement("div",{className:`${E}-header`},u),o.createElement(Ye.Z,Object.assign({},G),je,S),A&&o.createElement("div",{className:`${E}-footer`},A),P||(re==="bottom"||re==="both")&&$e)))}const rt=o.forwardRef(Rt);rt.Item=Pt;var ce=rt,Dt=f(92309),t=f(52676),ve="http://127.0.0.1:8080",Ht=function(n,l){var r,s=[],h=[],x=[],j=(r=l!=null?l:n.raw_content)!==null&&r!==void 0?r:"";return n.risks.forEach(function(c){var S="risk-".concat(c.identifier),B=c.detected_issue,P=B.match(/^(.{0,25})/),v=P?P[1]+(B.length>25?"...":""):"\u98CE\u9669\u63D0\u793A",O=c.legal_basis.map(function(y,T){return{id:"legal-".concat(c.identifier,"-").concat(T),lawName:y.law_name,article:y.order,content:y.content,score:y.relevance_score,explanation:void 0,relatedRange:c.highlight_range}});O.forEach(function(y){h.find(function(T){return T.lawName===y.lawName&&T.article===y.article})||h.push(y)});var $={id:S,identifier:c.identifier,level:c.level,title:v,content:c.detected_issue,suggestion:c.suggestions,highlightRange:c.highlight_range,legalBasis:O};if(s.push($),c.suggestions){var u="";if(j&&c.highlight_range){var A=c.highlight_range,R=A.start,F=A.end;R>=0&&F<=j.length&&(u=j.substring(R,F))}u?u.length>100&&(u=u.substring(0,100)+"..."):u=B.substring(0,50)+(B.length>50?"...":""),x.push({id:"sug-".concat(c.identifier),original:u,revised:c.suggestions,reason:"\u9488\u5BF9\u98CE\u9669\uFF1A".concat(v),highlightRange:c.highlight_range})}}),{contractText:j||void 0,risks:s,suggestions:x,legalBasis:h}},Zt=function(){var n=(0,ne.useSearchParams)(),l=X()(n,1),r=l[0],s=r.get("fileId"),h=(0,o.useState)(!0),x=X()(h,2),j=x[0],c=x[1],S=(0,o.useState)("init"),B=X()(S,2),P=B[0],v=B[1],O=(0,o.useState)(null),$=X()(O,2),u=$[0],A=$[1],R=(0,o.useState)(""),F=X()(R,2),y=F[0],T=F[1],U=(0,o.useState)(""),V=X()(U,2),C=V[0],N=V[1],Z=(0,o.useState)(!1),de=X()(Z,2),pe=de[0],_=de[1],xe=(0,o.useState)(null),ue=X()(xe,2),J=ue[0],se=ue[1],ie=(0,o.useState)("risk"),K=X()(ie,2),ee=K[0],W=K[1],me=(0,o.useState)(null),E=X()(me,2),D=E[0],ye=E[1],Ae=(0,o.useRef)(null),G=(0,o.useRef)(null);(0,o.useEffect)(function(){if(!s){ae.ZP.error("\u7F3A\u5C11\u6587\u4EF6ID\uFF0C\u8BF7\u91CD\u65B0\u4E0A\u4F20"),ne.history.push("/");return}return Le(),function(){G.current&&clearTimeout(G.current)}},[s]);var Ce=function(){var g=Q()(I()().mark(function a(){return I()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,(0,ne.request)("".concat(ve,"/api/v1/documents/").concat(s,"/risks/status"),{method:"GET"});case 3:return i.abrupt("return",i.sent);case 6:return i.prev=6,i.t0=i.catch(0),console.error("Fetch status error:",i.t0),i.abrupt("return",null);case 10:case"end":return i.stop()}},a,null,[[0,6]])}));return function(){return g.apply(this,arguments)}}(),Me=function(){var g=Q()(I()().mark(function a(){var d;return I()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.prev=0,m.next=3,(0,ne.request)("".concat(ve,"/api/v1/documents/").concat(s,"/content"),{method:"GET"});case 3:return d=m.sent,d!=null&&d.raw_content&&T(d.raw_content),m.abrupt("return",d);case 8:return m.prev=8,m.t0=m.catch(0),console.error("Fetch document content error:",m.t0),m.abrupt("return",null);case 12:case"end":return m.stop()}},a,null,[[0,8]])}));return function(){return g.apply(this,arguments)}}(),fe=function(){var g=Q()(I()().mark(function a(){return I()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,(0,ne.request)("".concat(ve,"/api/v1/documents/").concat(s,"/risks"),{method:"GET"});case 3:return i.abrupt("return",i.sent);case 6:return i.prev=6,i.t0=i.catch(0),console.error("Fetch risks error:",i.t0),i.abrupt("return",null);case 10:case"end":return i.stop()}},a,null,[[0,6]])}));return function(){return g.apply(this,arguments)}}(),be=function(){var g=Q()(I()().mark(function a(d){var i;return I()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(s){p.next=2;break}return p.abrupt("return",null);case 2:return p.prev=2,p.next=5,(0,ne.request)("".concat(ve,"/api/v1/documents/").concat(s,"/risks/").concat(d),{method:"GET"});case 5:return i=p.sent,p.abrupt("return",i);case 9:return p.prev=9,p.t0=p.catch(2),console.error("Fetch risk detail error:",p.t0),ae.ZP.error("\u83B7\u53D6\u98CE\u9669\u8BE6\u60C5\u5931\u8D25"),p.abrupt("return",null);case 14:case"end":return p.stop()}},a,null,[[2,9]])}));return function(d){return g.apply(this,arguments)}}(),H=function(){var g=Q()(I()().mark(function a(){return I()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,(0,ne.request)("".concat(ve,"/api/v1/documents/").concat(s,"/risks/analyze"),{method:"POST",data:{top_k:1}});case 3:return i.abrupt("return",i.sent);case 6:return i.prev=6,i.t0=i.catch(0),console.error("Trigger analysis error:",i.t0),i.abrupt("return",null);case 10:case"end":return i.stop()}},a,null,[[0,6]])}));return function(){return g.apply(this,arguments)}}(),Le=function(){var g=Q()(I()().mark(function a(){return I()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return c(!0),i.next=3,$e();case 3:case"end":return i.stop()}},a)}));return function(){return g.apply(this,arguments)}}(),$e=function(){var g=Q()(I()().mark(function a(){var d;return I()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return v("analyzing"),m.next=3,H();case 3:if(d=m.sent,d){m.next=11;break}return console.log("First analysis trigger failed, retrying in 1s..."),m.next=8,new Promise(function(p){return setTimeout(p,1e3)});case 8:return m.next=10,H();case 10:d=m.sent;case 11:d&&d.status==="analyzing"?(ae.ZP.info("\u5F00\u59CB\u667A\u80FD\u5206\u6790..."),Se()):(v("failed"),c(!1),ae.ZP.error("\u89E6\u53D1\u5206\u6790\u5931\u8D25\uFF0C\u53EF\u80FD\u662F\u6587\u6863\u5C1A\u672A\u51C6\u5907\u597D\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5"));case 12:case"end":return m.stop()}},a)}));return function(){return g.apply(this,arguments)}}(),Se=function g(){G.current&&clearTimeout(G.current),G.current=setTimeout(Q()(I()().mark(function a(){var d;return I()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,Ce();case 2:if(d=m.sent,d){m.next=6;break}return g(),m.abrupt("return");case 6:if(d.status!=="success"){m.next=13;break}return v("success"),ae.ZP.success("\u5206\u6790\u5B8C\u6210\uFF01"),m.next=11,Re();case 11:m.next=14;break;case 13:d.status==="failed"?(v("failed"),c(!1),ae.ZP.error(d.error||"\u5206\u6790\u5931\u8D25")):g();case 14:case"end":return m.stop()}},a)})),2e3)},Re=function(){var g=Q()(I()().mark(function a(){var d,i,m,p,M,te,b,le,Ie,Ze,We;return I()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,Promise.all([Me(),fe()]);case 2:if(d=q.sent,i=X()(d,2),m=i[0],p=i[1],!(p&&p.status==="success")){q.next=17;break}if(te=Ht(p,(M=m==null?void 0:m.raw_content)!==null&&M!==void 0?M:y),A(te),!(p.risks&&p.risks.length>0)){q.next=15;break}return le=(b=p.risks.find(function(Vt){return Vt.identifier==="0"}))!==null&&b!==void 0?b:p.risks[0],q.next=13,be(le.identifier);case 13:Ie=q.sent,Ie&&(ye(Ie),Ze="risk-".concat(le.identifier),N(Ze),We=document.getElementById(Ze),We&&We.scrollIntoView({behavior:"smooth",block:"center"}));case 15:q.next=18;break;case 17:ae.ZP.error("\u83B7\u53D6\u5206\u6790\u7ED3\u679C\u5931\u8D25");case 18:c(!1);case 19:case"end":return q.stop()}},a)}));return function(){return g.apply(this,arguments)}}(),we=function(){var g=Q()(I()().mark(function a(){return I()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(s){i.next=2;break}return i.abrupt("return");case 2:return c(!0),i.next=5,$e();case 5:case"end":return i.stop()}},a)}));return function(){return g.apply(this,arguments)}}(),ge=function(){ne.history.push("/")},De=function(){if(!u||!u.contractText)return y?(0,t.jsx)("pre",{className:"whitespace-pre-wrap",children:y}):(0,t.jsx)("div",{className:"text-gray-400 text-center py-10",children:"\u6682\u65E0\u5408\u540C\u6587\u672C\u5185\u5BB9"});var a=u.contractText,d=u.risks,i=u.suggestions,m=u.legalBasis,p=[];d.forEach(function(b){p.push({range:b.highlightRange,type:"risk",id:b.id})}),i.forEach(function(b){p.push({range:b.highlightRange,type:"suggestion",id:b.id})}),m.forEach(function(b){p.push({range:b.relatedRange,type:"legal",id:b.id})}),p.sort(function(b,le){return b.range.start-le.range.start});var M=[],te=0;return p.forEach(function(b,le){b.range.start<te||b.range.end>a.length||(b.range.start>te&&M.push((0,t.jsx)("span",{children:a.substring(te,b.range.start)},"text-".concat(le))),M.push((0,t.jsx)("mark",{className:"highlight ".concat(b.type," ").concat(C===b.id?"active":""),id:b.id,onClick:function(){return je(b.type,b.id)},children:a.substring(b.range.start,b.range.end)},"highlight-".concat(b.id))),te=b.range.end)}),te<a.length&&M.push((0,t.jsx)("span",{children:a.substring(te)},"text-end")),M},je=function(a,d){if(N(d),a==="risk"){var i=u==null?void 0:u.risks.find(function(M){return M.id===d});i&&(be(i.identifier).then(function(M){M&&ye(M)}),w(i))}else if(a==="suggestion"){var m=u==null?void 0:u.suggestions.find(function(M){return M.id===d});m&&L(m)}else if(a==="legal"){var p=u==null?void 0:u.legalBasis.find(function(M){return M.id===d});p&&k(p)}},re=function(a){N(a);var d=document.getElementById(a);d&&d.scrollIntoView({behavior:"smooth",block:"center"})},He=function(a){re(a.id),be(a.identifier).then(function(d){d&&ye(d)})},w=function(a){W("risk"),se(a),_(!0)},L=function(a){W("suggestion"),se(a),_(!0)},k=function(a){W("legal"),se(a),_(!0)},Ne=function(){if(!J)return null;if(ee==="risk"){var a=J;return(0,t.jsxs)("div",{className:"detail-modal",children:[(0,t.jsxs)("div",{className:"modal-section",children:[(0,t.jsx)("div",{className:"section-label",children:"\u98CE\u9669\u7B49\u7EA7"}),(0,t.jsx)(Te,{color:a.level==="high"?"red":a.level==="medium"?"orange":"green",children:a.level==="high"?"\u9AD8\u98CE\u9669":a.level==="medium"?"\u4E2D\u98CE\u9669":"\u4F4E\u98CE\u9669"})]}),(0,t.jsxs)("div",{className:"modal-section",children:[(0,t.jsx)("div",{className:"section-label",children:"\u98CE\u9669\u63CF\u8FF0"}),(0,t.jsx)("div",{className:"section-content",children:a.content})]}),a.suggestion&&(0,t.jsxs)("div",{className:"modal-section",children:[(0,t.jsx)("div",{className:"section-label",children:"\u5EFA\u8BAE\u63AA\u65BD"}),(0,t.jsx)("div",{className:"section-content",children:a.suggestion})]})]})}if(ee==="suggestion"){var d=J;return(0,t.jsxs)("div",{className:"detail-modal",children:[(0,t.jsxs)("div",{className:"diff-display",children:[(0,t.jsxs)("div",{className:"diff-row",children:[(0,t.jsx)("div",{className:"diff-label",children:"\u539F\u6587"}),(0,t.jsx)("div",{className:"diff-content original",children:d.original})]}),(0,t.jsxs)("div",{className:"diff-row",children:[(0,t.jsx)("div",{className:"diff-label",children:"\u4FEE\u6539\u4E3A"}),(0,t.jsx)("div",{className:"diff-content revised",children:d.revised})]})]}),d.reason&&(0,t.jsxs)("div",{className:"modal-section",children:[(0,t.jsx)("div",{className:"section-label",children:"\u4FEE\u6539\u7406\u7531"}),(0,t.jsx)("div",{className:"section-content",children:d.reason})]})]})}if(ee==="legal"){var i=J;return(0,t.jsxs)("div",{className:"detail-modal",children:[(0,t.jsxs)("div",{className:"modal-section",children:[(0,t.jsx)("div",{className:"section-label",children:"\u6CD5\u5F8B\u540D\u79F0"}),(0,t.jsx)("div",{className:"section-content",children:i.lawName})]}),(0,t.jsxs)("div",{className:"modal-section",children:[(0,t.jsx)("div",{className:"section-label",children:"\u6761\u6B3E"}),(0,t.jsx)("div",{className:"section-content",children:i.article})]}),(0,t.jsxs)("div",{className:"modal-section",children:[(0,t.jsx)("div",{className:"section-label",children:"\u6CD5\u6761\u5185\u5BB9"}),(0,t.jsx)("div",{className:"section-content",children:i.content})]}),(0,t.jsxs)("div",{className:"modal-section",children:[(0,t.jsx)("div",{className:"section-label",children:"\u76F8\u5173\u5EA6\u8BC4\u5206"}),(0,t.jsxs)("div",{className:"legal-score",children:[(0,t.jsx)(Qe.Z,{disabled:!0,allowHalf:!0,value:i.score*5}),(0,t.jsxs)("span",{style:{marginLeft:8},children:[(i.score*100).toFixed(0),"%"]})]})]}),i.explanation&&(0,t.jsxs)("div",{className:"modal-section",children:[(0,t.jsx)("div",{className:"section-label",children:"\u9002\u7528\u8BF4\u660E"}),(0,t.jsx)("div",{className:"section-content",children:i.explanation})]})]})}},Gt=function(){return ee==="risk"?"\u98CE\u9669\u8BE6\u60C5":ee==="suggestion"?"\u4FEE\u6539\u5EFA\u8BAE\u8BE6\u60C5":"\u6CD5\u5F8B\u4F9D\u636E\u8BE6\u60C5"};return j?(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white flex items-center justify-center px-4",children:(0,t.jsxs)("div",{className:"w-full max-w-md rounded-2xl bg-white border border-slate-100 shadow-xl px-8 py-10 text-center space-y-4",children:[(0,t.jsx)("div",{className:"bg-gradient-to-r from-brand-600 to-blue-500 inline-flex items-center justify-center rounded-full px-4 py-1 text-xs font-medium text-white",children:P==="analyzing"?"\u5408\u540C\u667A\u80FD\u5206\u6790\u8FDB\u884C\u4E2D\u2026":"\u6B63\u5728\u51C6\u5907\u5206\u6790..."}),(0,t.jsx)("p",{className:"text-sm text-slate-500",children:"\u6211\u4EEC\u6B63\u5728\u4E3A\u60A8\u89E3\u6790\u5408\u540C\u6761\u6B3E\u5E76\u751F\u6210\u98CE\u9669\u63D0\u793A\u3001\u4FEE\u6539\u610F\u89C1\u4E0E\u6CD5\u5F8B\u4F9D\u636E\uFF0C\u8BF7\u7A0D\u5019\u3002"}),(0,t.jsx)("div",{className:"flex justify-center pt-2",children:(0,t.jsx)(Ye.Z,{size:"large",tip:P==="analyzing"?"\u6B63\u5728\u5206\u6790\u5408\u540C...":"\u6B63\u5728\u52A0\u8F7D..."})})]})}):(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white px-4 py-6",children:(0,t.jsxs)("div",{className:"mx-auto max-w-6xl rounded-2xl bg-white border border-slate-100 shadow-xl overflow-hidden",children:[(0,t.jsxs)("div",{className:"bg-gradient-to-r from-brand-600 to-blue-500 px-6 py-4 flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs font-semibold tracking-wide text-brand-50/80 uppercase",children:"LegalRag"}),(0,t.jsx)("p",{className:"text-sm text-brand-50",children:"\u5408\u540C\u5206\u6790\u7ED3\u679C"})]}),(0,t.jsx)("span",{className:"rounded-full border border-white/30 bg-white/10 px-3 py-1 text-xs text-brand-50",children:"\u98CE\u9669\u63D0\u793A \xB7 \u4FEE\u6539\u610F\u89C1 \xB7 \u6CD5\u5F8B\u4F9D\u636E"})]}),(0,t.jsx)("div",{className:"contract-analysis px-4 pb-4 pt-2",children:(0,t.jsxs)(lt._z,{header:{title:"\u5408\u540C\u5206\u6790\u7ED3\u679C",onBack:ge,extra:[(0,t.jsx)(bt.ZP,{onClick:we,children:"\u91CD\u65B0\u5206\u6790"},"reanalyze")]},children:[u&&(0,t.jsx)("div",{className:"analysis-content",children:(0,t.jsxs)($t.Z,{gutter:24,children:[(0,t.jsx)(qe.Z,{span:12,children:(0,t.jsx)(he.Z,{title:"\u5408\u540C\u6587\u672C",bordered:!1,children:(0,t.jsx)("div",{className:"contract-text-panel",ref:Ae,children:De()})})}),(0,t.jsx)(qe.Z,{span:12,children:(0,t.jsxs)("div",{className:"analysis-panel",children:[(0,t.jsx)(he.Z,{title:"\u98CE\u9669\u8BE6\u60C5",bordered:!1,style:{marginBottom:16},children:D?(0,t.jsxs)("div",{className:"detail-modal",children:[(0,t.jsxs)("div",{className:"modal-section",children:[(0,t.jsx)("div",{className:"section-label",children:"\u98CE\u9669\u6807\u8BC6\u7B26"}),(0,t.jsx)("div",{className:"section-content",children:D.identifier})]}),(0,t.jsxs)("div",{className:"modal-section",children:[(0,t.jsx)("div",{className:"section-label",children:"\u98CE\u9669\u7B49\u7EA7"}),(0,t.jsx)(Te,{color:D.level==="high"?"red":D.level==="medium"?"orange":"green",children:D.level==="high"?"\u9AD8\u98CE\u9669":D.level==="medium"?"\u4E2D\u98CE\u9669":"\u4F4E\u98CE\u9669"})]}),(0,t.jsxs)("div",{className:"modal-section",children:[(0,t.jsx)("div",{className:"section-label",children:"\u98CE\u9669\u63CF\u8FF0"}),(0,t.jsx)("div",{className:"section-content",children:D.detected_issue})]}),D.suggestions&&(0,t.jsxs)("div",{className:"modal-section",children:[(0,t.jsx)("div",{className:"section-label",children:"\u5EFA\u8BAE\u63AA\u65BD"}),(0,t.jsx)("div",{className:"section-content",children:D.suggestions})]}),D.legal_basis&&D.legal_basis.length>0&&(0,t.jsxs)("div",{className:"modal-section",children:[(0,t.jsx)("div",{className:"section-label",children:"\u76F8\u5173\u6CD5\u5F8B\u4F9D\u636E"}),(0,t.jsx)("div",{className:"section-content",children:D.legal_basis.map(function(g,a){return(0,t.jsxs)("div",{style:{marginBottom:8},children:[(0,t.jsxs)("div",{style:{fontWeight:600},children:[g.law_name," ",g.order]}),(0,t.jsx)("div",{style:{fontSize:12,color:"#666"},children:g.content})]},a)})})]})]}):(0,t.jsx)("div",{className:"text-gray-400 text-center py-6",children:"\u6682\u65E0\u98CE\u9669\u8BE6\u60C5"})}),(0,t.jsxs)("div",{className:"panel-section",children:[(0,t.jsx)("div",{className:"section-title",children:"\u{1F6A8} \u98CE\u9669\u63D0\u793A"}),(0,t.jsx)(ce,{dataSource:u.risks,renderItem:function(a){return(0,t.jsx)(ce.Item,{className:"risk-item",onClick:function(){return He(a)},children:(0,t.jsxs)(he.Z,{size:"small",hoverable:!0,style:{width:"100%"},children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(Te,{className:"risk-level ".concat(a.level),children:a.level==="high"?"\u9AD8":a.level==="medium"?"\u4E2D":"\u4F4E"}),(0,t.jsx)("span",{style:{fontWeight:600,marginLeft:8},children:a.title})]}),(0,t.jsx)("div",{style:{marginTop:8,color:"#666",fontSize:12},children:a.content})]})})}})]}),(0,t.jsxs)("div",{className:"panel-section",children:[(0,t.jsx)("div",{className:"section-title",children:"\u270F\uFE0F \u4FEE\u6539\u610F\u89C1"}),(0,t.jsx)(ce,{dataSource:u.suggestions,renderItem:function(a){return(0,t.jsx)(ce.Item,{className:"suggestion-item",onClick:function(){re(a.id),L(a)},children:(0,t.jsx)(he.Z,{size:"small",hoverable:!0,style:{width:"100%"},children:(0,t.jsxs)("div",{className:"diff-text",children:[(0,t.jsxs)("div",{style:{marginBottom:8},children:[(0,t.jsx)("span",{style:{color:"#999",fontSize:12},children:"\u539F\u6587\uFF1A"}),(0,t.jsx)("span",{className:"original",children:a.original})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{style:{color:"#999",fontSize:12},children:"\u6539\u4E3A\uFF1A"}),(0,t.jsx)("span",{className:"revised",children:a.revised})]})]})})})}})]}),(0,t.jsxs)("div",{className:"panel-section",children:[(0,t.jsx)("div",{className:"section-title",children:"\u2696\uFE0F \u6CD5\u5F8B\u4F9D\u636E"}),(0,t.jsx)(ce,{dataSource:u.legalBasis,renderItem:function(a){return(0,t.jsx)(ce.Item,{className:"legal-item",onClick:function(){re(a.id),k(a)},children:(0,t.jsxs)(he.Z,{size:"small",hoverable:!0,style:{width:"100%"},children:[(0,t.jsxs)("div",{style:{fontWeight:600},children:[a.lawName," ",a.article]}),(0,t.jsxs)("div",{style:{margin:"8px 0",fontSize:12,color:"#666"},children:[a.content.substring(0,50),"..."]}),(0,t.jsxs)("div",{className:"legal-score",children:[(0,t.jsx)(Qe.Z,{disabled:!0,allowHalf:!0,value:a.score*5,style:{fontSize:12}}),(0,t.jsxs)("span",{style:{marginLeft:8,fontSize:12},children:["\u76F8\u5173\u5EA6: ",(a.score*100).toFixed(0),"%"]})]})]})})}})]})]})})]})}),(0,t.jsx)(Dt.Z,{title:Gt(),open:pe,onCancel:function(){return _(!1)},footer:null,width:700,children:Ne()})]})})]})})},Wt=Zt}}]);
