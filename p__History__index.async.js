"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[768],{21889:function(ie,R,t){var l=t(75271),h=t(86678),L=t(60606),I=t(50165),s=t(52676);var x=function(f){var a=f.index,r=(0,l.useRef)(null),o=100,m=[5195493,12951641,16777215,9647082],G=(0,l.useMemo)(function(){return m[Math.floor(Math.random()*m.length)]},[]),k=(0,l.useMemo)(function(){return Math.random()*.4+.1},[]),p=(0,l.useMemo)(function(){return{offset:Math.random()*100,speed:Math.random()*.005+.002,radius:Math.random()*4+2,freq:Math.random()*.5+.2}},[]),K=(0,l.useMemo)(function(){return new Float32Array(o*3)},[]),j=(0,l.useRef)(null);return(0,h.F)(function(W){if(r.current&&j.current){for(var u=W.clock.getElapsedTime()*10,$=p.offset,X=p.speed,H=p.radius,Y=p.freq,C=u*X+$,O=j.current.attributes.position.array,e=0;e<o;e++){var A=e/o,F=A*Math.PI*2+C,Q=Math.cos(F)*H+Math.sin(C*.5+a)*2,M=Math.sin(F*Y)*(H*.5)+Math.cos(C+a)*1,v=Math.sin(F+C)*2-A*5;O[e*3]=Q,O[e*3+1]=M,O[e*3+2]=v}j.current.attributes.position.needsUpdate=!0,r.current.rotation.z+=.001,r.current.rotation.y+=5e-4}}),(0,s.jsxs)("line",{ref:r,children:[(0,s.jsx)("bufferGeometry",{ref:j,children:(0,s.jsx)("bufferAttribute",{attach:"attributes-position",args:[K,3]})}),(0,s.jsx)("lineBasicMaterial",{color:G,transparent:!0,opacity:k,blending:I.AdditiveBlending})]})},z=function(){var f=40,a=(0,l.useMemo)(function(){return Array.from({length:f},function(r,o){return o})},[]);return(0,s.jsx)(s.Fragment,{children:a.map(function(r){return(0,s.jsx)(x,{index:r},r)})})},U=function(){var f=(0,h.D)(),a=f.camera,r=f.pointer;return(0,h.F)(function(){var o=r.x*2,m=-r.y*2;a.position.x+=(o-a.position.x)*.05,a.position.y+=(m-a.position.y)*.05,a.lookAt(0,0,0)}),null},w=function(){return(0,s.jsx)("div",{className:"absolute inset-0 z-0 bg-[#020617]",children:(0,s.jsxs)(L.Xz,{camera:{position:[0,0,10],fov:45},dpr:[1,2],children:[(0,s.jsx)("ambientLight",{intensity:.5}),(0,s.jsx)(z,{}),(0,s.jsx)(U,{})]})})};R.Z=w},35727:function(ie,R,t){t.r(R),t.d(R,{default:function(){return Q}});var l=t(90228),h=t.n(l),L=t(87999),I=t.n(L),s=t(48305),x=t.n(s),z=t(97395),U=t(64297),w=t(86743),P=t(17023),f=t(31178),a=t(43953),r=t(31707),o=t(97150),m=t(64329),G=t(5902),k=t(45011),p=t(6139),K=t(58979),j=t(44726),W=t(50842),u=t(75271),$=t(21889),X=t(26068),H=t.n(X),Y="http://127.0.0.1:8080",C=function(){var M=I()(h()().mark(function v(){var c,g,b,Z,B,S,E=arguments;return h()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return c=E.length>0&&E[0]!==void 0?E[0]:{},g=c.page,b=g===void 0?1:g,Z=c.page_size,B=Z===void 0?20:Z,S=c.search,y.abrupt("return",(0,a.request)("".concat(Y,"/api/v1/history/list"),{method:"GET",params:H()({page:b,page_size:B},S?{search:S}:{})}));case 3:case"end":return y.stop()}},v)}));return function(){return M.apply(this,arguments)}}(),O=null,e=t(52676),A=20,F=function(){var v=(0,u.useState)([]),c=x()(v,2),g=c[0],b=c[1],Z=(0,u.useState)(!0),B=x()(Z,2),S=B[0],E=B[1],J=(0,u.useState)(1),y=x()(J,2),V=y[0],q=y[1],ue=(0,u.useState)(0),_=x()(ue,2),ee=_[0],le=_[1],ce=(0,u.useState)(""),te=x()(ce,2),re=te[0],de=te[1],he=(0,u.useState)(""),ae=x()(he,2),ne=ae[0],xe=ae[1],se=(0,u.useCallback)(function(){var d=I()(h()().mark(function n(N,D){var T;return h()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,E(!0),i.next=4,C({page:N,page_size:A,search:D||void 0});case 4:T=i.sent,T.success?(b(T.data||[]),le(T.total||0)):r.ZP.error(T.message||"\u83B7\u53D6\u5386\u53F2\u8BB0\u5F55\u5931\u8D25"),i.next=12;break;case 8:i.prev=8,i.t0=i.catch(0),console.error("Failed to fetch history",i.t0),r.ZP.error("\u83B7\u53D6\u5386\u53F2\u8BB0\u5F55\u5931\u8D25");case 12:return i.prev=12,E(!1),i.finish(12);case 15:case"end":return i.stop()}},n,null,[[0,8,12,15]])}));return function(n,N){return d.apply(this,arguments)}}(),[]);(0,u.useEffect)(function(){se(V,re)},[V,re,se]);var oe=function(){q(1),de(ne)},fe=function(n){q(n)},ve=function(){r.ZP.info("\u8BE5\u529F\u80FD\u76EE\u524D\u9700\u901A\u8FC7\u540E\u7AEF\u63A5\u53E3\u5B9E\u73B0")},me=function(n,N){n.stopPropagation(),r.ZP.info("\u5220\u9664\u529F\u80FD\u9700\u914D\u5408\u540E\u7AEF\u63A5\u53E3\u5B9E\u73B0")};return(0,e.jsxs)("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:100,background:"#020617",overflow:"hidden"},children:[(0,e.jsx)($.Z,{}),(0,e.jsx)("div",{style:{position:"relative",zIndex:1,padding:"40px 24px",height:"100%",overflowY:"auto"},children:(0,e.jsxs)("div",{className:"mx-auto max-w-4xl",children:[(0,e.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,e.jsxs)("div",{className:"flex items-center gap-4",children:[(0,e.jsx)(o.ZP,{shape:"circle",icon:(0,e.jsx)(z.Z,{}),onClick:function(){return a.history.push("/upload")},className:"!bg-white/5 !border-white/10 !text-white/60 hover:!text-white hover:!border-white/30"}),(0,e.jsxs)("div",{children:[(0,e.jsxs)("h1",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[(0,e.jsx)(U.Z,{className:"text-[#C5A059]"}),"\u5386\u53F2\u8BB0\u5F55"]}),(0,e.jsx)("p",{className:"text-slate-500 text-sm mt-1",children:"\u67E5\u770B\u548C\u7BA1\u7406\u60A8\u8FC7\u5F80\u4E0A\u4F20\u7684\u5408\u540C\u5206\u6790\u4EFB\u52A1"})]})]}),g.length>0&&(0,e.jsx)(m.Z,{title:"\u786E\u5B9A\u8981\u6E05\u7A7A\u6240\u6709\u5386\u53F2\u8BB0\u5F55\u5417\uFF1F",onConfirm:ve,okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88",okButtonProps:{danger:!0},children:(0,e.jsx)(o.ZP,{danger:!0,ghost:!0,icon:(0,e.jsx)(w.Z,{}),className:"!border-red-500/30 hover:!bg-red-500/10",children:"\u6E05\u7A7A\u5386\u53F2"})})]}),(0,e.jsxs)("div",{className:"mb-6 flex gap-3",children:[(0,e.jsx)(G.Z,{placeholder:"\u641C\u7D22\u5408\u540C\u540D\u79F0...",value:ne,onChange:function(n){return xe(n.target.value)},onPressEnter:oe,prefix:(0,e.jsx)(P.Z,{className:"text-slate-500"}),className:"!bg-white/5 !border-white/10 !text-white placeholder:!text-slate-500 !rounded-lg",style:{maxWidth:400}}),(0,e.jsx)(o.ZP,{type:"primary",onClick:oe,className:"!bg-[#C5A059] !text-black !border-none !rounded-lg",children:"\u641C\u7D22"})]}),(0,e.jsx)("div",{className:"sexy-card overflow-hidden",children:(0,e.jsx)(k.Z,{spinning:S,children:(0,e.jsx)(p.Z,{dataSource:g,className:"history-list",renderItem:function(n){return(0,e.jsx)(p.Z.Item,{className:"!border-white/5 !px-8 !py-6 hover:!bg-white/5 transition-all cursor-pointer group relative",onClick:function(){a.history.push("/contract-analysis?fileId=".concat(n.uuid,"&topK=").concat(n.top_k,"&fromHistory=true"))},children:(0,e.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,e.jsxs)("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[(0,e.jsx)("div",{className:"w-12 h-12 rounded-xl bg-[#C5A059]/10 flex items-center justify-center flex-shrink-0 group-hover:bg-[#C5A059]/20 transition-colors",children:(0,e.jsx)(f.Z,{className:"text-[#C5A059] text-xl"})}),(0,e.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,e.jsxs)("div",{className:"flex items-center gap-3 mb-1",children:[(0,e.jsx)("span",{className:"text-lg font-medium text-slate-200 truncate group-hover:text-white transition-colors",children:n.filename}),(0,e.jsxs)(K.Z,{className:"!bg-[#C5A059]/10 !text-[#C5A059] !border-[#C5A059]/20 !m-0 !text-[10px] !px-2 !py-0 !rounded-md",children:["Top-K: ",n.top_k]})]}),(0,e.jsxs)("div",{className:"text-slate-500 text-xs font-mono uppercase tracking-wider",children:["Uploaded on ",new Date(n.created_at).toLocaleString()]})]})]}),(0,e.jsxs)("div",{className:"flex items-center gap-6",children:[(0,e.jsx)("div",{className:"text-[#C5A059] opacity-0 group-hover:opacity-100 transition-all transform translate-x-2 group-hover:translate-x-0 font-mono text-xs uppercase tracking-widest",children:"View Analysis \u2192"}),(0,e.jsx)(m.Z,{title:"\u786E\u5B9A\u5220\u9664\u8FD9\u6761\u8BB0\u5F55\u5417\uFF1F",onConfirm:function(D){return me(D,n.uuid)},okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88",children:(0,e.jsx)(o.ZP,{type:"text",icon:(0,e.jsx)(w.Z,{}),className:"!text-slate-600 hover:!text-red-400 opacity-0 group-hover:opacity-100 transition-opacity",onClick:function(D){return D.stopPropagation()}})})]})]})})},locale:{emptyText:!S&&(0,e.jsxs)("div",{className:"py-20 flex flex-col items-center",children:[(0,e.jsx)(j.Z,{description:!1}),(0,e.jsx)("span",{className:"text-slate-600 font-mono text-xs mt-4 tracking-widest uppercase",children:"No history found"}),(0,e.jsx)(o.ZP,{type:"primary",className:"mt-6 !bg-[#C5A059] !text-black border-none !h-10 !px-8 !rounded-full !font-bold !text-xs !uppercase !tracking-widest",onClick:function(){return a.history.push("/upload")},children:"Go to Upload"})]})}})})}),ee>A&&(0,e.jsx)("div",{className:"mt-6 flex justify-center",children:(0,e.jsx)(W.Z,{current:V,total:ee,pageSize:A,onChange:fe,showSizeChanger:!1,className:"dark-pagination"})}),(0,e.jsxs)("div",{className:"mt-8 px-4 flex justify-between items-center text-[10px] text-slate-600 font-mono uppercase tracking-widest",children:[(0,e.jsx)("span",{children:"* Records are stored on server"}),(0,e.jsx)("span",{children:"Quantum.History.System v1.0"})]})]})})]})},Q=F}}]);
